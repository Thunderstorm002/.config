var WebPlayerSDKLoader=function(){'use strict';var a='undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:'undefined'!=typeof global?global:'undefined'!=typeof self?self:{};function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,'default')?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var r,n,c=t(function(l){!function(e){var r,s={};s.VERSION="1.4.1";var n={},t=function(e,t){return function(){return t.apply(e,arguments)}},i=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])e in n||!r[t].hasOwnProperty(e)||(n[e]=r[t][e]);return n},o=function(e,t){return{value:e,name:t}};s.DEBUG=o(1,'DEBUG'),s.INFO=o(2,'INFO'),s.TIME=o(3,'TIME'),s.WARN=o(4,'WARN'),s.ERROR=o(8,'ERROR'),s.OFF=o(99,'OFF');var a=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};a.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){'string'==typeof e&&0<e.length&&this.invoke(s.TIME,[e,'start'])},timeEnd:function(e){'string'==typeof e&&0<e.length&&this.invoke(s.TIME,[e,'end'])},invoke:function(e,t){r&&this.enabledFor(e)&&r(t,i({level:e},this.context))}};var u,c=new a({filterLevel:s.OFF});(u=s).enabledFor=t(c,c.enabledFor),u.debug=t(c,c.debug),u.time=t(c,c.time),u.timeEnd=t(c,c.timeEnd),u.info=t(c,c.info),u.warn=t(c,c.warn),u.error=t(c,c.error),u.log=u.info,s.setHandler=function(e){r=e},s.setLevel=function(e){for(var t in c.setLevel(e),n)n.hasOwnProperty(t)&&n[t].setLevel(e)},s.getLevel=function(){return c.getLevel()},s.get=function(e){return n[e]||(n[e]=new a(i({name:e},c.context)))},s.createDefaultHandler=function(i){(i=i||{}).formatter=i.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var o={},a=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(e,t){e=Array.prototype.slice.call(e);var r,n=console.log;t.level===s.TIME?(r=(t.name?'['+t.name+'] ':'')+e[0],'start'===e[1]?console.time?console.time(r):o[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):a(n,[r+': '+((new Date).getTime()-o[r])+'ms'])):(t.level===s.WARN&&console.warn?n=console.warn:t.level===s.ERROR&&console.error?n=console.error:t.level===s.INFO&&console.info?n=console.info:t.level===s.DEBUG&&console.debug&&(n=console.debug),i.formatter(e,t),a(n,e))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},l.exports?l.exports=s:(s._prevLogger=e.Logger,s.noConflict=function(){return e.Logger=s._prevLogger,s},e.Logger=s)}(a)});(n=r||(r={})).ContentStateChange="ContentStateChange",n.PlaybackStateChange="PlaybackStateChange",n.TimeDataChange="TimeDataChange",n.TimelineChange="TimelineChange",n.TimelineEnded="TimelineEnded",n.Error="Error",n.ContentError="ContentError",n.FullscreenChange="FullscreenChange",n.Seek="Seek",n.Close="Close";var i,o,s=r;(o=i||(i={})).AdReporting="AdReporting",o.MetricsReporting="MetricsReporting",o.PictureInPicture="PictureInPicture",o.Stream="Stream",o.Volume="Volume",o.GCast="GCast",o.UIDisplayStatus="UIDisplayStatus",o.UserActivity="UserActivity";var u,l,p=i;(l=u||(u={})).Connected="Connected",l.Disconnected="Disconnected";var f,d=u,h={bandwidthCap:1/0};(f||(f={})).LoadError="LoadError";var m,y,v=f;(y=m||(m={})).AmazonVideoPlayer="AmazonVideoPlayer",y.ChromelessPlayer="ChromelessPlayer",y.GCastPlayer="GCastPlayer",y.LocalContentManager="LocalContentManager",y.Player="Player";var g,_,b=m,S=function(){function e(){}return e.getActiveWeblabs=function(){return[e.HTML5_ENABLE_CHROMIUM,e.LIVE_LOW_LATENCY_CHROME,e.LIVE_LOW_LATENCY_CHROMIUM,e.LIVE_LOW_LATENCY_EDGENEXT,e.LIVE_LOW_LATENCY_FIREFOX,e.LIVE_LOW_LATENCY_FIREFOX64,e.LIVE_LOW_LATENCY_OPERA,e.HASTUR_IE,e.HASTUR_SAFARI,e.HTML5_PICTUREINPICTURE]},e.HTML5_ENABLE_CHROMIUM="AIV_HTML5_ENABLE_CHROMIUM_251485",e.LIVE_LOW_LATENCY_CHROME="AIV_HTML5_LIVE_LOW_LATENCY_CHROME_242583",e.LIVE_LOW_LATENCY_CHROMIUM="AIV_HTML5_LIVE_LOW_LATENCY_CHROMIUM_242584",e.LIVE_LOW_LATENCY_EDGENEXT="AIV_HTML5_LIVE_LOW_LATENCY_EDGENEXT_306349",e.LIVE_LOW_LATENCY_FIREFOX="AIV_HTML5_LIVE_LOW_LATENCY_FIREFOX_242581",e.LIVE_LOW_LATENCY_FIREFOX64="AIV_HTML5_LIVE_LOW_LATENCY_FIREFOX64_242582",e.LIVE_LOW_LATENCY_OPERA="AIV_HTML5_LIVE_LOW_LATENCY_OPERA_242580",e.HASTUR_IE="AIV_HTML5_HASTUR_LAUNCH_IE_227137",e.HASTUR_SAFARI="AIV_HTML5_HASTUR_LAUNCH_SAFARI_227138",e.HTML5_PICTUREINPICTURE="AIV_HTML5_PICTUREINPICTURE_LAUNCH_309146",e}();(_=g||(g={}))[_.C=0]="C",_[_.T1=1]="T1",_[_.T2=2]="T2",_[_.T3=3]="T3",_[_.T4=4]="T4",_[_.T5=5]="T5",_[_.T6=6]="T6",_[_.T7=7]="T7",_[_.T8=8]="T8",_[_.T9=9]="T9",_[_.T10=10]="T10",_[_.T11=11]="T11",_[_.T12=12]="T12",_[_.T13=13]="T13",_[_.T14=14]="T14",_[_.T15=15]="T15",_[_.T16=16]="T16",_[_.T17=17]="T17",_[_.T18=18]="T18",_[_.T19=19]="T19",_[_.T20=20]="T20";var E=g,w=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WebPlayerEvent=s,t.WebPlayerFeatures=p,t.CastState=d,t.DataUsageDefault=h,t.WebPlayerSDKEvent=v,t.WebPlayerSDKFeatures=b,t.Weblabs=S,t.WeblabTreatment=E});e(w);w.WebPlayerEvent,w.WebPlayerFeatures,w.CastState,w.DataUsageDefault,w.WebPlayerSDKEvent,w.WebPlayerSDKFeatures,w.Weblabs,w.WeblabTreatment;var T=t(function(e,t){var n,i=a&&a.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(r){function e(){var e=this.constructor,t=r.call(this,"The operation was cancelled")||this;return t.name="CancelError",Object.setPrototypeOf(t,e.prototype),t}return i(e,r),e}(Error);t.CancelError=r});e(T);T.CancelError;var I=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(){}return t.setTaskQueue=function(e){t.taskQueue=e},t.enqueue=function(e){t.taskQueue.enqueue(e)},t}();t.TaskQueueManager=r});e(I);I.TaskQueueManager;var O=t(function(e,t){var r,n;Object.defineProperty(t,"__esModule",{value:!0}),(n=r||(r={}))[n.Pending=0]="Pending",n[n.Fulfilled=1]="Fulfilled",n[n.Rejected=2]="Rejected";var i=c.get("Promise"),o=function(){function u(e){var t=this;if(this.state=r.Pending,this.value=void 0,this.error=void 0,this.handlers=[],this.handled=!1,this.resolve=function(r){if(t!==r)try{var n=u.getThen(r);null!=n?t.doResolve(function(e,t){return n.call(r,e,t)},t.resolve,t.reject):t.fulfill(r)}catch(e){t.reject(e)}else t.reject(new TypeError("Resolving promise with itself not allowed"))},this.fulfill=function(e){t.state=r.Fulfilled,t.value=e,t.handlers.forEach(function(e){t.handle(e)}),t.handlers=[]},this.reject=function(e){t.state=r.Rejected,t.error=e,0===t.handlers.length?I.TaskQueueManager.enqueue(function(){0!==t.handlers.length||t.handled||i.warn("Unhandled promise rejection",e)}):(t.handlers.forEach(function(e){t.handle(e)}),t.handlers=[])},null==e||"function"!=typeof e)throw new Error("Promise resolved "+e+" is not a function");this.doResolve(e,this.resolve,this.reject)}return u.resolve=function(t){return new u(function(e){e(t)})},u.reject=function(r){return new u(function(e,t){t(r)})},u.all=function(s){return Array.isArray(s)?new u(function(r,n){var i=[],o=s.length,a=0;if(0!==o)for(var e=function(t){var e=s[t];(e instanceof u?e:u.resolve(e)).then(function(e){i[t]=e,++a===o&&r(i)},n)},t=0;t<o;t++)e(t);else r([])}):u.reject(new TypeError("Not an array of promises"))},u.race=function(o){return Array.isArray(o)?new u(function(e,t){for(var r=0,n=o;r<n.length;r++){var i=n[r];(i instanceof u?i:u.resolve(i)).then(e,t)}}):u.reject(new TypeError("Not an array of promises"))},u.prototype.then=function(n,i){var e=this;return new u(function(t,r){e.done(function(e){try{t("function"==typeof n?n(e):e)}catch(e){r(e)}},function(e){try{"function"==typeof i?t(i(e)):r(e)}catch(e){r(e)}})})},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.done=function(e,t){this.handle({onFulfilled:e,onRejected:t})},u.getThen=function(e){var t=typeof e;if(("object"===t||"function"===t)&&null!==e){var r=e.then;if("function"==typeof r)return r}return null},u.prototype.doResolve=function(e,t,r){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,r(e))})}catch(e){if(n)return;n=!0,r(e)}},u.prototype.handle=function(e){var t=this;this.state===r.Pending?this.handlers.push(e):(this.state===r.Fulfilled?I.TaskQueueManager.enqueue(function(){e.onFulfilled(t.value)}):I.TaskQueueManager.enqueue(function(){e.onRejected(t.error)}),this.handled=!0)},u}();t.Promise=o});e(O);O.Promise;var R=t(function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PromisePolyfill=r,"undefined"!=typeof Promise?t.PromisePolyfill=r=Promise:t.PromisePolyfill=r=O.Promise});e(R);R.PromisePolyfill;var A=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){void 0===t&&(t=R.PromisePolyfill);var r=this;this.wasRequested=!1,this.cancel=function(){r.wasRequested||(r.wasRequested=!0,r.resolvePromise(new T.CancelError))},this.backingPromise=new t(function(e,t){r.resolvePromise=e}),e(this.cancel)}return r.prototype.throwIfRequested=function(){if(this.wasRequested)throw new T.CancelError},Object.defineProperty(r.prototype,"requested",{get:function(){return this.wasRequested},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"promise",{get:function(){return this.backingPromise},enumerable:!0,configurable:!0}),r.source=function(e){var t;return void 0===e&&(e=R.PromisePolyfill),{token:new r(function(e){t=e},e),cancel:t}},r}();t.CancelToken=r});e(A);A.CancelToken;var P=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){var r=this;this.backingPromise=new R.PromisePolyfill(function(e,t){r.resolvePromise=e,r.rejectPromise=t})}return e.prototype.resolve=function(e){this.resolvePromise(e)},e.prototype.reject=function(e){this.rejectPromise(e)},Object.defineProperty(e.prototype,"promise",{get:function(){return this.backingPromise},enumerable:!0,configurable:!0}),e}();t.Deferred=r});e(P);P.Deferred;var L=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FINALLY=function(t){return[function(e){return R.PromisePolyfill.resolve(t()).then(function(){return e})},function(e){return R.PromisePolyfill.resolve(t()).then(function(){throw e})}]}});e(L);L.FINALLY;var M=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.queue=[]}return e.prototype.enqueue=function(e){this.queue.push(e)},e.prototype.tick=function(){0!==this.queue.length&&this.queue.shift()()},e.prototype.runUntilEmpty=function(){for(;0<this.queue.length;)this.tick()},e.prototype.reset=function(){this.queue=[]},e}();t.SyncTaskQueue=r});e(M);M.SyncTaskQueue;var C=t(function(H,B){(function(){var e=this,t=e._,n=Array.prototype,a=Object.prototype,r=Function.prototype,i=n.push,u=n.slice,p=a.toString,o=a.hasOwnProperty,s=Array.isArray,c=Object.keys,l=r.bind,f=Object.create,d=function(){},h=function(e){return e instanceof h?e:this instanceof h?void(this._wrapped=e):new h(e)};H.exports&&(B=H.exports=h),(B._=h).VERSION='1.8.3';var m=function(i,o,e){if(void 0===o)return i;switch(null==e?3:e){case 1:return function(e){return i.call(o,e)};case 2:return function(e,t){return i.call(o,e,t)};case 3:return function(e,t,r){return i.call(o,e,t,r)};case 4:return function(e,t,r,n){return i.call(o,e,t,r,n)}}return function(){return i.apply(o,arguments)}},y=function(e,t,r){return null==e?h.identity:h.isFunction(e)?m(e,t,r):h.isObject(e)?h.matcher(e):h.property(e)};h.iteratee=function(e,t){return y(e,t,1/0)};var v=function(u,c){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var r=1;r<t;r++)for(var n=arguments[r],i=u(n),o=i.length,a=0;a<o;a++){var s=i[a];c&&void 0!==e[s]||(e[s]=n[s])}return e}},g=function(e){if(!h.isObject(e))return{};if(f)return f(e);d.prototype=e;var t=new d;return d.prototype=null,t},_=function(t){return function(e){return null==e?void 0:e[t]}},b=Math.pow(2,53)-1,S=_('length'),E=function(e){var t=S(e);return'number'==typeof t&&0<=t&&t<=b};function w(s){return function(e,t,r,n){t=m(t,n,4);var i=!E(e)&&h.keys(e),o=(i||e).length,a=0<s?0:o-1;return arguments.length<3&&(r=e[i?i[a]:a],a+=s),function(e,t,r,n,i,o){for(;0<=i&&i<o;i+=s){var a=n?n[i]:i;r=t(r,e[a],a,e)}return r}(e,t,r,i,a,o)}}h.each=h.forEach=function(e,t,r){var n,i;if(t=m(t,r),E(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var o=h.keys(e);for(n=0,i=o.length;n<i;n++)t(e[o[n]],o[n],e)}return e},h.map=h.collect=function(e,t,r){t=y(t,r);for(var n=!E(e)&&h.keys(e),i=(n||e).length,o=Array(i),a=0;a<i;a++){var s=n?n[a]:a;o[a]=t(e[s],s,e)}return o},h.reduce=h.foldl=h.inject=w(1),h.reduceRight=h.foldr=w(-1),h.find=h.detect=function(e,t,r){var n;if(void 0!==(n=E(e)?h.findIndex(e,t,r):h.findKey(e,t,r))&&-1!==n)return e[n]},h.filter=h.select=function(e,n,t){var i=[];return n=y(n,t),h.each(e,function(e,t,r){n(e,t,r)&&i.push(e)}),i},h.reject=function(e,t,r){return h.filter(e,h.negate(y(t)),r)},h.every=h.all=function(e,t,r){t=y(t,r);for(var n=!E(e)&&h.keys(e),i=(n||e).length,o=0;o<i;o++){var a=n?n[o]:o;if(!t(e[a],a,e))return!1}return!0},h.some=h.any=function(e,t,r){t=y(t,r);for(var n=!E(e)&&h.keys(e),i=(n||e).length,o=0;o<i;o++){var a=n?n[o]:o;if(t(e[a],a,e))return!0}return!1},h.contains=h.includes=h.include=function(e,t,r,n){return E(e)||(e=h.values(e)),('number'!=typeof r||n)&&(r=0),0<=h.indexOf(e,t,r)},h.invoke=function(e,r){var n=u.call(arguments,2),i=h.isFunction(r);return h.map(e,function(e){var t=i?r:e[r];return null==t?t:t.apply(e,n)})},h.pluck=function(e,t){return h.map(e,h.property(t))},h.where=function(e,t){return h.filter(e,h.matcher(t))},h.findWhere=function(e,t){return h.find(e,h.matcher(t))},h.max=function(e,n,t){var r,i,o=-1/0,a=-1/0;if(null==n&&null!=e)for(var s=0,u=(e=E(e)?e:h.values(e)).length;s<u;s++)r=e[s],o<r&&(o=r);else n=y(n,t),h.each(e,function(e,t,r){i=n(e,t,r),(a<i||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},h.min=function(e,n,t){var r,i,o=1/0,a=1/0;if(null==n&&null!=e)for(var s=0,u=(e=E(e)?e:h.values(e)).length;s<u;s++)(r=e[s])<o&&(o=r);else n=y(n,t),h.each(e,function(e,t,r){((i=n(e,t,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},h.shuffle=function(e){for(var t,r=E(e)?e:h.values(e),n=r.length,i=Array(n),o=0;o<n;o++)(t=h.random(0,o))!==o&&(i[o]=i[t]),i[t]=r[o];return i},h.sample=function(e,t,r){return null==t||r?(E(e)||(e=h.values(e)),e[h.random(e.length-1)]):h.shuffle(e).slice(0,Math.max(0,t))},h.sortBy=function(e,n,t){return n=y(n,t),h.pluck(h.map(e,function(e,t,r){return{value:e,index:t,criteria:n(e,t,r)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(n<r||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),'value')};var T=function(a){return function(n,i,e){var o={};return i=y(i,e),h.each(n,function(e,t){var r=i(e,t,n);a(o,e,r)}),o}};h.groupBy=T(function(e,t,r){h.has(e,r)?e[r].push(t):e[r]=[t]}),h.indexBy=T(function(e,t,r){e[r]=t}),h.countBy=T(function(e,t,r){h.has(e,r)?e[r]++:e[r]=1}),h.toArray=function(e){return e?h.isArray(e)?u.call(e):E(e)?h.map(e,h.identity):h.values(e):[]},h.size=function(e){return null==e?0:E(e)?e.length:h.keys(e).length},h.partition=function(e,n,t){n=y(n,t);var i=[],o=[];return h.each(e,function(e,t,r){(n(e,t,r)?i:o).push(e)}),[i,o]},h.first=h.head=h.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:h.initial(e,e.length-t)},h.initial=function(e,t,r){return u.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},h.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:h.rest(e,Math.max(0,e.length-t))},h.rest=h.tail=h.drop=function(e,t,r){return u.call(e,null==t||r?1:t)},h.compact=function(e){return h.filter(e,h.identity)};var I=function(e,t,r,n){for(var i=[],o=0,a=n||0,s=S(e);a<s;a++){var u=e[a];if(E(u)&&(h.isArray(u)||h.isArguments(u))){t||(u=I(u,t,r));var c=0,l=u.length;for(i.length+=l;c<l;)i[o++]=u[c++]}else r||(i[o++]=u)}return i};function O(o){return function(e,t,r){t=y(t,r);for(var n=S(e),i=0<o?0:n-1;0<=i&&i<n;i+=o)if(t(e[i],i,e))return i;return-1}}function R(o,a,s){return function(e,t,r){var n=0,i=S(e);if('number'==typeof r)0<o?n=0<=r?r:Math.max(r+i,n):i=0<=r?Math.min(r+1,i):r+i+1;else if(s&&r&&i)return e[r=s(e,t)]===t?r:-1;if(t!=t)return 0<=(r=a(u.call(e,n,i),h.isNaN))?r+n:-1;for(r=0<o?n:i-1;0<=r&&r<i;r+=o)if(e[r]===t)return r;return-1}}h.flatten=function(e,t){return I(e,t,!1)},h.without=function(e){return h.difference(e,u.call(arguments,1))},h.uniq=h.unique=function(e,t,r,n){h.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=y(r,n));for(var i=[],o=[],a=0,s=S(e);a<s;a++){var u=e[a],c=r?r(u,a,e):u;t?(a&&o===c||i.push(u),o=c):r?h.contains(o,c)||(o.push(c),i.push(u)):h.contains(i,u)||i.push(u)}return i},h.union=function(){return h.uniq(I(arguments,!0,!0))},h.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=S(e);n<i;n++){var o=e[n];if(!h.contains(t,o)){for(var a=1;a<r&&h.contains(arguments[a],o);a++);a===r&&t.push(o)}}return t},h.difference=function(e){var t=I(arguments,!0,!0,1);return h.filter(e,function(e){return!h.contains(t,e)})},h.zip=function(){return h.unzip(arguments)},h.unzip=function(e){for(var t=e&&h.max(e,S).length||0,r=Array(t),n=0;n<t;n++)r[n]=h.pluck(e,n);return r},h.object=function(e,t){for(var r={},n=0,i=S(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},h.findIndex=O(1),h.findLastIndex=O(-1),h.sortedIndex=function(e,t,r,n){for(var i=(r=y(r,n,1))(t),o=0,a=S(e);o<a;){var s=Math.floor((o+a)/2);r(e[s])<i?o=s+1:a=s}return o},h.indexOf=R(1,h.findIndex,h.sortedIndex),h.lastIndexOf=R(-1,h.findLastIndex),h.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),o=0;o<n;o++,e+=r)i[o]=e;return i};var A=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var o=g(e.prototype),a=e.apply(o,i);return h.isObject(a)?a:o};h.bind=function(e,t){if(l&&e.bind===l)return l.apply(e,u.call(arguments,1));if(!h.isFunction(e))throw new TypeError('Bind must be called on a function');var r=u.call(arguments,2),n=function(){return A(e,n,t,this,r.concat(u.call(arguments)))};return n},h.partial=function(i){var o=u.call(arguments,1),a=function(){for(var e=0,t=o.length,r=Array(t),n=0;n<t;n++)r[n]=o[n]===h?arguments[e++]:o[n];for(;e<arguments.length;)r.push(arguments[e++]);return A(i,a,this,this,r)};return a},h.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error('bindAll must be passed function names');for(t=1;t<n;t++)e[r=arguments[t]]=h.bind(e[r],e);return e},h.memoize=function(n,i){var o=function(e){var t=o.cache,r=''+(i?i.apply(this,arguments):e);return h.has(t,r)||(t[r]=n.apply(this,arguments)),t[r]};return o.cache={},o},h.delay=function(e,t){var r=u.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},h.defer=h.partial(h.delay,h,1),h.throttle=function(r,n,i){var o,a,s,u=null,c=0;i||(i={});var l=function(){c=!1===i.leading?0:h.now(),u=null,s=r.apply(o,a),u||(o=a=null)};return function(){var e=h.now();c||!1!==i.leading||(c=e);var t=n-(e-c);return o=this,a=arguments,t<=0||n<t?(u&&(clearTimeout(u),u=null),c=e,s=r.apply(o,a),u||(o=a=null)):u||!1===i.trailing||(u=setTimeout(l,t)),s}},h.debounce=function(t,r,n){var i,o,a,s,u,c=function(){var e=h.now()-s;e<r&&0<=e?i=setTimeout(c,r-e):(i=null,n||(u=t.apply(a,o),i||(a=o=null)))};return function(){a=this,o=arguments,s=h.now();var e=n&&!i;return i||(i=setTimeout(c,r)),e&&(u=t.apply(a,o),a=o=null),u}},h.wrap=function(e,t){return h.partial(t,e)},h.negate=function(e){return function(){return!e.apply(this,arguments)}},h.compose=function(){var r=arguments,n=r.length-1;return function(){for(var e=n,t=r[n].apply(this,arguments);e--;)t=r[e].call(this,t);return t}},h.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},h.before=function(e,t){var r;return function(){return 0<--e&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},h.once=h.partial(h.before,2);var P=!{toString:null}.propertyIsEnumerable('toString'),L=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'];function M(e,t){var r=L.length,n=e.constructor,i=h.isFunction(n)&&n.prototype||a,o='constructor';for(h.has(e,o)&&!h.contains(t,o)&&t.push(o);r--;)(o=L[r])in e&&e[o]!==i[o]&&!h.contains(t,o)&&t.push(o)}h.keys=function(e){if(!h.isObject(e))return[];if(c)return c(e);var t=[];for(var r in e)h.has(e,r)&&t.push(r);return P&&M(e,t),t},h.allKeys=function(e){if(!h.isObject(e))return[];var t=[];for(var r in e)t.push(r);return P&&M(e,t),t},h.values=function(e){for(var t=h.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},h.mapObject=function(e,t,r){t=y(t,r);for(var n,i=h.keys(e),o=i.length,a={},s=0;s<o;s++)a[n=i[s]]=t(e[n],n,e);return a},h.pairs=function(e){for(var t=h.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},h.invert=function(e){for(var t={},r=h.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},h.functions=h.methods=function(e){var t=[];for(var r in e)h.isFunction(e[r])&&t.push(r);return t.sort()},h.extend=v(h.allKeys),h.extendOwn=h.assign=v(h.keys),h.findKey=function(e,t,r){t=y(t,r);for(var n,i=h.keys(e),o=0,a=i.length;o<a;o++)if(t(e[n=i[o]],n,e))return n},h.pick=function(e,t,r){var n,i,o={},a=e;if(null==a)return o;h.isFunction(t)?(i=h.allKeys(a),n=m(t,r)):(i=I(arguments,!1,!1,1),n=function(e,t,r){return t in r},a=Object(a));for(var s=0,u=i.length;s<u;s++){var c=i[s],l=a[c];n(l,c,a)&&(o[c]=l)}return o},h.omit=function(e,t,r){if(h.isFunction(t))t=h.negate(t);else{var n=h.map(I(arguments,!1,!1,1),String);t=function(e,t){return!h.contains(n,t)}}return h.pick(e,t,r)},h.defaults=v(h.allKeys,!0),h.create=function(e,t){var r=g(e);return t&&h.extendOwn(r,t),r},h.clone=function(e){return h.isObject(e)?h.isArray(e)?e.slice():h.extend({},e):e},h.tap=function(e,t){return t(e),e},h.isMatch=function(e,t){var r=h.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),o=0;o<n;o++){var a=r[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var C=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof h&&(e=e._wrapped),t instanceof h&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case'[object RegExp]':case'[object String]':return''+e==''+t;case'[object Number]':return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case'[object Date]':case'[object Boolean]':return+e==+t}var o='[object Array]'===i;if(!o){if('object'!=typeof e||'object'!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(h.isFunction(a)&&a instanceof a&&h.isFunction(s)&&s instanceof s)&&'constructor'in e&&'constructor'in t)return!1}n=n||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!C(e[u],t[u],r,n))return!1}else{var c,l=h.keys(e);if(u=l.length,h.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!h.has(t,c)||!C(e[c],t[c],r,n))return!1}return r.pop(),n.pop(),!0};h.isEqual=function(e,t){return C(e,t)},h.isEmpty=function(e){return null==e||(E(e)&&(h.isArray(e)||h.isString(e)||h.isArguments(e))?0===e.length:0===h.keys(e).length)},h.isElement=function(e){return!(!e||1!==e.nodeType)},h.isArray=s||function(e){return'[object Array]'===p.call(e)},h.isObject=function(e){var t=typeof e;return'function'===t||'object'===t&&!!e},h.each(['Arguments','Function','String','Number','Date','RegExp','Error'],function(t){h['is'+t]=function(e){return p.call(e)==='[object '+t+']'}}),h.isArguments(arguments)||(h.isArguments=function(e){return h.has(e,'callee')}),'function'!=typeof/./&&'object'!=typeof Int8Array&&(h.isFunction=function(e){return'function'==typeof e||!1}),h.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},h.isNaN=function(e){return h.isNumber(e)&&e!==+e},h.isBoolean=function(e){return!0===e||!1===e||'[object Boolean]'===p.call(e)},h.isNull=function(e){return null===e},h.isUndefined=function(e){return void 0===e},h.has=function(e,t){return null!=e&&o.call(e,t)},h.noConflict=function(){return e._=t,this},h.identity=function(e){return e},h.constant=function(e){return function(){return e}},h.noop=function(){},h.property=_,h.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},h.matcher=h.matches=function(t){return t=h.extendOwn({},t),function(e){return h.isMatch(e,t)}},h.times=function(e,t,r){var n=Array(Math.max(0,e));t=m(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},h.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},h.now=Date.now||function(){return(new Date).getTime()};var D={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'},k=h.invert(D),N=function(t){var r=function(e){return t[e]},e='(?:'+h.keys(t).join('|')+')',n=RegExp(e),i=RegExp(e,'g');return function(e){return e=null==e?'':''+e,n.test(e)?e.replace(i,r):e}};h.escape=N(D),h.unescape=N(k),h.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),h.isFunction(n)?n.call(e):n};var x=0;h.uniqueId=function(e){var t=++x+'';return e?e+t:t},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,W={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'},U=/\\|'|\r|\n|\u2028|\u2029/g,V=function(e){return'\\'+W[e]};h.template=function(o,e,t){!e&&t&&(e=t),e=h.defaults({},e,h.templateSettings);var r=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join('|')+'|$','g'),a=0,s="__p+='";o.replace(r,function(e,t,r,n,i){return s+=o.slice(a,i).replace(U,V),a=i+e.length,t?s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":n&&(s+="';\n"+n+"\n__p+='"),e}),s+="';\n",e.variable||(s='with(obj||{}){\n'+s+'}\n'),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+'return __p;\n';try{var n=new Function(e.variable||'obj','_',s)}catch(e){throw e.source=s,e}var i=function(e){return n.call(this,e,h)},u=e.variable||'obj';return i.source='function('+u+'){\n'+s+'}',i},h.chain=function(e){var t=h(e);return t._chain=!0,t};var j=function(e,t){return e._chain?h(t).chain():t};h.mixin=function(r){h.each(h.functions(r),function(e){var t=h[e]=r[e];h.prototype[e]=function(){var e=[this._wrapped];return i.apply(e,arguments),j(this,t.apply(h,e))}})},h.mixin(h),h.each(['pop','push','reverse','shift','sort','splice','unshift'],function(t){var r=n[t];h.prototype[t]=function(){var e=this._wrapped;return r.apply(e,arguments),'shift'!==t&&'splice'!==t||0!==e.length||delete e[0],j(this,e)}}),h.each(['concat','join','slice'],function(e){var t=n[e];h.prototype[e]=function(){return j(this,t.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},h.prototype.valueOf=h.prototype.toJSON=h.prototype.value,h.prototype.toString=function(){return''+this._wrapped}}).call(a)}),D=(C._,t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=window),this.windowRef=e}return e.prototype.setImmediate=function(e){return this.windowRef.setImmediate(e)},e.prototype.clearImmediate=function(e){this.windowRef.clearImmediate(e)},e.isSupported=function(e){return void 0===e&&(e=window),null!=e&&C.isFunction(e.setImmediate)&&C.isFunction(e.clearImmediate)},e}();t.ImmediateComponentDirect=r}));e(D);D.ImmediateComponentDirect;var k=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function o(e,t){void 0===e&&(e=window),void 0===t&&(t="setImmediate-"+Math.random());var n=this;this.pendingHandlers={},this.nextId=1,this.onPostMessage=function(e){if(C.isString(e.data)&&0===e.data.indexOf(n.messageIdentifier)){var t=parseInt(e.data.substr(n.messageIdentifier.length)),r=n.pendingHandlers[t];null!=r&&(n.clearImmediate(t),r())}},this.windowRef=e,this.messageIdentifier=t;var r=e.location,i=r.port?":"+r.port:"";this.origin=this.isOriginValid(r.origin)?r.origin:r.protocol+"//"+r.hostname+i,e.addEventListener(o.MESSAGE_EVENT,this.onPostMessage)}return o.prototype.setImmediate=function(e){return C.isFunction(e)&&(this.pendingHandlers[this.nextId]=e,this.windowRef.postMessage(this.messageIdentifier+this.nextId,this.origin)),this.nextId++},o.prototype.clearImmediate=function(e){delete this.pendingHandlers[e]},o.isSupported=function(e){return void 0===e&&(e=window),null!=e&&C.isFunction(e.postMessage)&&C.isFunction(e.addEventListener)},o.prototype.isOriginValid=function(e){return null!=e&&-1!==e.indexOf("://")},o.MESSAGE_EVENT="message",o}();t.ImmediateComponentPostMessage=r});e(k);k.ImmediateComponentPostMessage;var N=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=window),this.windowRef=e}return e.prototype.setImmediate=function(e){return this.windowRef.setTimeout(e,0)},e.prototype.clearImmediate=function(e){this.windowRef.clearTimeout(e)},e.isSupported=function(e){return void 0===e&&(e=window),null!=e&&C.isFunction(e.setTimeout)&&C.isFunction(e.clearTimeout)},e}();t.ImmediateComponentTimeout=r});e(N);N.ImmediateComponentTimeout;var x=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=c.get("ImmediateComponentPromise"),r=function(){function e(e){void 0===e&&(e=window);var i=this;this.lastId=0,this.pendingIdMap={},this.pendingImmediate=!1,this.onNextMicrotask=function(){var e=i.pendingIdMap;i.pendingIdMap={},i.pendingImmediate=!1;for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];try{e[n]()}catch(e){o.warn("Unhandled handler exception",e,e.stack)}}},this.promiseRef=e.Promise}return e.prototype.setImmediate=function(e){var t=this.lastId++;return this.pendingIdMap[t]=e,this.pendingImmediate||(this.pendingImmediate=!0,this.promiseRef.resolve().then(this.onNextMicrotask)),t},e.prototype.clearImmediate=function(e){delete this.pendingIdMap[e]},e.isSupported=function(e){return null!=e&&null!=e.Promise},e}();t.ImmediateComponentPromise=r});e(x);x.ImmediateComponentPromise;var F=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===e&&(e=[x.ImmediateComponentPromise,D.ImmediateComponentDirect,k.ImmediateComponentPostMessage,N.ImmediateComponentTimeout]),void 0===t&&(t=window),this.windowRef=t;var r=C.find(e,function(e){return e.isSupported(t)});if(null==r)throw Error("No supported immediate component type");this.immediateComponent=new r}return e.prototype.setTimeout=function(e,t){return this.windowRef.setTimeout(e,t)},e.prototype.clearTimeout=function(e){this.windowRef.clearTimeout(e)},e.prototype.setInterval=function(e,t){return this.windowRef.setInterval(e,t)},e.prototype.clearInterval=function(e){this.windowRef.clearInterval(e)},e.prototype.setImmediate=function(e){return this.immediateComponent.setImmediate(e)},e.prototype.clearImmediate=function(e){this.immediateComponent.clearImmediate(e)},e}();t.Timer=r});e(F);F.Timer;var W=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=new F.Timer;t.timer=r});e(W);W.timer;var U=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=c.get("TimeoutTaskQueue"),n=function(){function e(e){void 0===e&&(e=W.timer);var t=this;this.executor=function(){for(;0<t.tasks.length;){var e=t.tasks.shift();try{e()}catch(e){r.error("Unhandled exception thrown by a task: ",e,e.stack)}}t.immediate=null},this.timer=e,this.tasks=[],this.immediate=null}return e.prototype.enqueue=function(e){this.tasks.push(e),null===this.immediate&&(this.immediate=this.timer.setImmediate(this.executor))},e}();t.TimeoutTaskQueue=n});e(U);U.TimeoutTaskQueue;var V=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancelError=T.CancelError,t.CancelToken=A.CancelToken,t.Deferred=P.Deferred,t.FINALLY=L.FINALLY,t.PromiseImpl=O.Promise,t.Promise=R.PromisePolyfill,t.SyncTaskQueue=M.SyncTaskQueue,t.TaskQueueManager=I.TaskQueueManager,t.TimeoutTaskQueue=U.TimeoutTaskQueue,null!=W.timer&&I.TaskQueueManager.setTaskQueue(new U.TimeoutTaskQueue(W.timer))});e(V);V.CancelError,V.CancelToken,V.Deferred,V.FINALLY,V.PromiseImpl,V.Promise,V.SyncTaskQueue,V.TaskQueueManager,V.TimeoutTaskQueue;var j=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var l=c.get("EventEmitter"),r=function(){function c(){this.timer=W.timer,this.onCallbacks={},this.onceCallbacks={},this.idempotentEvents={},this.maxListeners=10}return c.onUnhandledEventListener=function(e){c.unhandledEventListenerCallback=e},c.prototype.emitSync=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.onCallbacks[t],i=this.onceCallbacks[t],o=[];n&&(o=o.concat(n)),i&&(o=o.concat(i),delete this.onceCallbacks[t]);for(var a=0,s=o;a<s.length;a++){var u=s[a];try{u.apply(void 0,e)}catch(e){l.error("UnhandledEventListenerError for '"+t+"' event:",e,"Stack:",e.stack),null!=c.unhandledEventListenerCallback&&c.unhandledEventListenerCallback(e,t.toString())}}},c.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.timer.setImmediate(function(){return t.emitSync.apply(t,[e].concat(r))})},c.prototype.emitIdempotent=function(e){var t=this;null==this.idempotentEvents[e]&&(this.idempotentEvents[e]=!0,this.timer.setImmediate(function(){delete t.idempotentEvents[e],t.emitSync(e)}))},c.prototype.off=function(e,t){var r=this.onCallbacks[e],n=this.onceCallbacks[e],i=!1;if(r){var o=r.length;this.inPlaceFilter(r,t),o!==r.length&&(i=!0),0===r.length&&delete this.onCallbacks[e]}n&&!i&&(this.inPlaceFilter(n,t),0===n.length&&delete this.onceCallbacks[e])},c.prototype.on=function(e,t){var r=this.onCallbacks[e];r?(r.push(t),0<this.maxListeners&&r.length===this.maxListeners+1&&l.warn("MaxListenersExceededWarning for event \""+e+"\"",(new Error).stack)):this.onCallbacks[e]=[t]},c.prototype.once=function(e,t){var r=this.onceCallbacks[e];r?r.push(t):this.onceCallbacks[e]=[t]},c.prototype.removeAllListeners=function(e){void 0===e&&(e=null),null===e?(this.onCallbacks={},this.onceCallbacks={}):(delete this.onCallbacks[e],delete this.onceCallbacks[e])},c.prototype.setMaxListeners=function(e){this.maxListeners=e},c.prototype.listeners=function(e){var t=this.onCallbacks[e],r=this.onceCallbacks[e],n=[];return t&&(n=n.concat(t)),r&&(n=n.concat(r)),n},c.prototype.inPlaceFilter=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t){e.splice(r,1);break}},c}();t.EventEmitter=r});e(j);j.EventEmitter;var H=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.events={},this.eventSource=e}return e.prototype.on=function(e,t){if(null!=this.events[e])throw new Error("this.events[\""+e+"\"] already exists");this.events[e]=t,this.eventSource.on(e,t)},e.prototype.off=function(e,t){delete this.events[e],this.eventSource.off(e,t)},e.prototype.removeAllListeners=function(){for(var e in this.events)this.events.hasOwnProperty(e)&&this.off(e,this.events[e])},e}();t.EventTracker=r});e(H);H.EventTracker;var B=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=c.get("MulticastCallback"),r=function(){function i(){this.timer=W.timer,this.callbacks=[]}return i.onUnhandledEventListener=function(e){i.unhandledEventListenerCallback=e},i.prototype.add=function(e){this.callbacks.push(e)},i.prototype.remove=function(e){this.callbacks=C.without(this.callbacks,e)},i.prototype.removeAll=function(){this.callbacks=[]},i.prototype.getAllCallbacks=function(){return this.callbacks},i.prototype.invoke=function(e){var t=this;this.timer.setImmediate(function(){return t.invokeSync(e)})},i.prototype.invokeSync=function(e){for(var t=0,r=this.callbacks;t<r.length;t++){var n=r[t];try{n(e)}catch(e){o.error("UnhandledEventListenerError: "+e+". Stack: "+e.stack),null!=i.unhandledEventListenerCallback&&i.unhandledEventListenerCallback(e)}}},i}();t.MulticastCallback=r});e(B);B.MulticastCallback;var q=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});c.get("MultiplexedEventSource");var r=function(){function e(e){void 0===e&&(e=!1),this.sources=[],this.allListeners=[],this.active=null,this.bufferedCallbacks=[],this.bufferInactiveEvents=e}return e.prototype.selectSource=function(t){var e=C.find(this.sources,function(e){return e.id===t});if(null==e)throw new Error("Entry with id "+t+" doesn't exist");this.active=e.source,this.reEmitEventsForSourceId(t)},e.prototype.addSource=function(t,r){var n=this;if(null!=C.find(this.sources,function(e){return e.id===t}))throw new Error("Source with id "+t+" already exist");this.sources.push({id:t,source:r}),C.each(this.allListeners,function(e){n.listenDownstream(t,r,e)})},e.prototype.removeSource=function(t){var r=this,e=C.partition(this.sources,function(e){return e.id===t});if(0===e[0].length)throw new Error("No source with id "+t+" exists");this.sources=e[1];var n=e[0][0];C.each(this.allListeners,function(e){r.unlistenDownstream(t,n.source,e)}),this.active===n.source&&(this.active=null)},e.prototype.on=function(e,t){this.internalOn(e,t)},e.prototype.off=function(t,r){var e=C.findIndex(this.allListeners,function(e){return e.event===t&&(e.callback===r||e.onceOriginCallback===r)});if(-1!==e){var n=this.allListeners[e];this.allListeners.splice(e,1),C.each(n.downstreamListeners,function(e){e.source.off(n.event,e.callback)})}},e.prototype.once=function(r,n){var i=this,o=!1,a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.off(r,a),o||(n.apply(i,e),o=!0)};this.internalOn(r,a,n)},e.prototype.internalOn=function(e,t,r){void 0===r&&(r=null);var n={event:e,callback:t,onceOriginCallback:r,downstreamListeners:[]};this.allListeners.push(n),this.listenAllDownstreams(n)},e.prototype.listenAllDownstreams=function(t){var r=this;C.each(this.sources,function(e){r.listenDownstream(e.id,e.source,t)})},e.prototype.listenDownstream=function(n,i,o){var a=this,e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(){return o.callback.apply(a,e)};a.active===i?(o.onceOriginCallback&&a.off(o.event,o.callback),r()):a.bufferInactiveEvents&&a.bufferCallbackForId(n,r)};o.downstreamListeners.push({source:i,callback:e}),i.on(o.event,e)},e.prototype.unlistenDownstream=function(e,t,r){r.downstreamListeners=C.reject(r.downstreamListeners,function(e){return e.source===t&&(t.off(r.event,e.callback),!0)});var n=this.getBufferedCallbacksForId(e);null!=n&&(n.callbacks=[])},e.prototype.bufferCallbackForId=function(e,t){var r=this.getBufferedCallbacksForId(e);null==r&&(r={id:e,callbacks:[]},this.bufferedCallbacks.push(r)),r.callbacks.push(t)},e.prototype.reEmitEventsForSourceId=function(e){if(this.bufferInactiveEvents){var t=this.getBufferedCallbacksForId(e);if(null!=t&&!C.isEmpty(t.callbacks)){for(var r=0,n=t.callbacks;r<n.length;r++){(0,n[r])()}t.callbacks=[]}}},e.prototype.getBufferedCallbacksForId=function(t){return C.find(this.bufferedCallbacks,function(e){return e.id===t})},e}();t.MultiplexedEventSource=r});e(q);q.MultiplexedEventSource;var K=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=j.EventEmitter,t.EventTracker=H.EventTracker,t.MulticastCallback=B.MulticastCallback,t.MultiplexedEventSource=q.MultiplexedEventSource});e(K);K.EventEmitter,K.EventTracker,K.MulticastCallback,K.MultiplexedEventSource;var Y,G,X=function(){function t(){}return t.isClassic=function(e){switch(e){case t.DE:case t.JP:case t.UK:case t.US:return!0}return!1},t.ROE_EU="A3K6Y4MI8GDYMT",t.ROW_EU="A2MFUE2XK8ZSSY",t.ROW_FE="A15PK738MTQHSO",t.ROW_NA="ART4WZ8MWBX2Y",t.DE="A1PA6795UKMFR9",t.JP="A1VC38T7YXB528",t.UK="A1F83G8C2ARO7P",t.US="ATVPDKIKX0DER",t}(),z=function(){function r(){}return r.isAmazon=function(e,t){return void 0===t&&(t=window),e=null==e?t.location.hostname:e,r.AMAZON_REGEX.test(e)},r.fromMarketplaceId=function(e){switch(e){case X.DE:return r.DE;case X.JP:return r.JP;case X.UK:return r.UK;case X.ROE_EU:case X.ROW_EU:case X.ROW_FE:case X.ROW_NA:return r.PRIME_VIDEO;case X.US:return r.US;default:throw new Error("Can't get AmazonFQDN for unknown MarketplaceId! Received: "+e)}},r.AMAZON_REGEX=/((.*\.|^)amazon\..*|(.*\.|^)primevideo\..*)/,r.DE="www.amazon.de",r.JP="www.amazon.co.jp",r.UK="www.amazon.co.uk",r.US="www.amazon.com",r.PRIME_VIDEO="www.primevideo.com",r}(),Q=function(){function e(){}return e.SILVERLIGHT_PC="A63V4FRV3YUP9",e.SILVERLIGHT_MAC="A2G17C9GWLWFKO",e.HTML5="AOAGZA014O5RE",e}(),J={aar:"aa",abk:"ab",afr:"af",aka:"ak",amh:"am",ara:"ar",arg:"an",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",cat:"ca",ces:"cs",cha:"ch",che:"ce",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",dan:"da",deu:"de",div:"dv",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fry:"fy",ful:"ff",gla:"gd",gle:"ga",glg:"gl",glv:"gv",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mah:"mh",mal:"ml",mar:"mr",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"},Z=function(){function e(){}return e.BACKSPACE=8,e.DELETE=46,e.ESC=27,e.SHIFT=16,e.SPACE=32,e.TAB=9,e.A=65,e.C=67,e.F=70,e.M=77,e.LEFT_ARROW=37,e.UP_ARROW=38,e.RIGHT_ARROW=39,e.DOWN_ARROW=40,e.START_OF_NUMBER=48,e.END_OF_NUMBER=57,e.START_OF_NUMPAD=96,e.END_OF_NUMPAD=105,e}(),$=function(){function n(){}return n.fromMarketplaceId=function(e){var t,r=n.getDomainFromMarketplaceId(e);switch(e){case X.ROW_NA:case X.US:t=n.US_REGION;break;case X.ROE_EU:case X.ROW_EU:case X.UK:case X.DE:t=n.EU_REGION;break;case X.ROW_FE:case X.JP:t=n.JP_REGION;break;default:throw new Error("Can't get PartnerServiceEndpoint for unknown MarketplaceId! Received: "+e)}return n.PROTOCOL+t+r},n.getDomainFromMarketplaceId=function(e){switch(e){case X.ROW_NA:case X.ROE_EU:case X.ROW_EU:case X.ROW_FE:return".primevideo.com";case X.DE:return".amazon.de";case X.JP:return".amazon.co.jp";case X.UK:return".amazon.co.uk";default:return".amazon.com"}},n.EU_REGION="atv-ps-eu",n.JP_REGION="atv-ps-fe",n.US_REGION="atv-ps",n.DOMAIN_REGEX=/.*(\.(amazon|primevideo)\..*)/,n.DEFAULT_DOMAIN=".amazon.com",n.PROTOCOL="https://",n}(),ee=function(){function e(){}return e.DiagnosticsEndpointKey="diagnostics_url",e}(),te=function(){function e(){}return e.EXTRA_SMALL_SCREEN_MAX_WIDTH=479,e.SMALL_SCREEN_MIN_WIDTH=480,e.MEDIUM_SCREEN_MIN_WIDTH=640,e.LARGE_SCREEN_MIN_WIDTH=1200,e.EXTRA_LARGE_SCREEN_MIN_WIDTH=1921,e.SCALE_FACTOR_EXTRA_SMALL=1,e.SCALE_FACTOR_SMALL=100/e.SMALL_SCREEN_MIN_WIDTH,e.SCALE_FACTOR_MEDIUM=100/e.MEDIUM_SCREEN_MIN_WIDTH,e.SCALE_FACTOR_LARGE=100/e.LARGE_SCREEN_MIN_WIDTH,e.SCALE_FACTOR_EXTRA_LARGE=100/e.EXTRA_LARGE_SCREEN_MIN_WIDTH,e.SCREEN_EXTRA_SMALL_MEDIA_QUERY="(max-width: "+e.EXTRA_SMALL_SCREEN_MAX_WIDTH+"px)",e.SCREEN_SMALL_MEDIA_QUERY="(min-width: "+e.SMALL_SCREEN_MIN_WIDTH+"px)",e.SCREEN_MEDIUM_MEDIA_QUERY="(min-width: "+e.MEDIUM_SCREEN_MIN_WIDTH+"px)",e.SCREEN_LARGE_MEDIA_QUERY="(min-width: "+e.LARGE_SCREEN_MIN_WIDTH+"px)",e.SCREEN_EXTRA_LARGE_MEDIA_QUERY="(min-width: "+e.EXTRA_LARGE_SCREEN_MIN_WIDTH+"px)",e}(),re=function(){function e(){}return e.getActiveWeblabs=function(){return[e.ATV_WEB_PLAYER_OAUTH,e.HTML5_HEVC,e.DISABLE_SILVERLIGHT,e.HTML5_SAX_MANIFEST_PARSER,e.HTML5_SAFARI_CVBR,e.HTML5_SAFARI_LIVE,e.HTML5_NETWORK_SEED,e.HTML5_NETWORK_STATUS_TOAST,e.HTML5_REMOVE_BUFFER_SIZE_RATIO,e.HTML5_USE_PLAYBACK_URLS,e.HTML5_MAX_DRIFT_MITIGATION_THRESHOLD,e.HTML5_TNF_BASELINE_SKIP,e.HTML5_CAROUSEL,e.HTML5_HASTUR_MATURITY_RATING_OVERLAY,e.LIVE_LOW_LATENCY_CHROME,e.LIVE_LOW_LATENCY_CHROMIUM,e.LIVE_LOW_LATENCY_FIREFOX,e.LIVE_LOW_LATENCY_FIREFOX64,e.LIVE_LOW_LATENCY_OPERA]},e.ATV_WEB_PLAYER_OAUTH="ATV_WEB_PLAYER_OAUTH_74228",e.HTML5_HEVC="AIV_HTML5_HEVC_79711",e.DISABLE_SILVERLIGHT="AIV_WEB_PLAYER_DISABLE_SILVERLIGHT_91138",e.HTML5_SAX_MANIFEST_PARSER="AIV_HTML5_SAX_MANIFEST_PARSER_89833",e.HTML5_SAFARI_CVBR="AIV_HTML5_SAFARI_CVBR_93874",e.HTML5_SAFARI_LIVE="AIV_HTML5_SAFARI_LIVE_107851",e.HTML5_NETWORK_SEED="AIV_HTML5_NETWORK_SEED_95840",e.HTML5_NETWORK_STATUS_TOAST="AIV_HTML5_NETWORK_STATUS_TOAST_98636",e.HTML5_REMOVE_BUFFER_SIZE_RATIO="AIV_HTML5_REMOVE_BUFFER_SIZE_RATIO_99314",e.HTML5_USE_PLAYBACK_URLS="AIV_HTML5_USE_PLAYBACK_URLS_107655",e.HTML5_MAX_DRIFT_MITIGATION_THRESHOLD="AIV_HTML5_MAX_DRIFT_MITIGATION_THRESHOLD_121641",e.HTML5_TNF_BASELINE_SKIP="AIV_HTML5_TNF_BASELINE_SKIP_125764",e.HTML5_CAROUSEL="AIV_HTML5_MIRO_CAROUSEL_196734",e.HTML5_HASTUR_MATURITY_RATING_OVERLAY="AIV_HTML5_HASTUR_MATURITY_RATING_OVERLAY_272841",e.LIVE_LOW_LATENCY_CHROME="AIV_HTML5_LIVE_LOW_LATENCY_CHROME_242583",e.LIVE_LOW_LATENCY_CHROMIUM="AIV_HTML5_LIVE_LOW_LATENCY_CHROMIUM_242584",e.LIVE_LOW_LATENCY_FIREFOX="AIV_HTML5_LIVE_LOW_LATENCY_FIREFOX_242581",e.LIVE_LOW_LATENCY_FIREFOX64="AIV_HTML5_LIVE_LOW_LATENCY_FIREFOX64_242582",e.LIVE_LOW_LATENCY_OPERA="AIV_HTML5_LIVE_LOW_LATENCY_OPERA_242580",e}();(G=Y||(Y={}))[G.C=0]="C",G[G.T1=1]="T1",G[G.T2=2]="T2",G[G.T3=3]="T3",G[G.T4=4]="T4",G[G.T5=5]="T5",G[G.T6=6]="T6",G[G.T7=7]="T7",G[G.T8=8]="T8",G[G.T9=9]="T9",G[G.T10=10]="T10",G[G.T11=11]="T11",G[G.T12=12]="T12",G[G.T13=13]="T13",G[G.T14=14]="T14",G[G.T15=15]="T15",G[G.T16=16]="T16",G[G.T17=17]="T17",G[G.T18=18]="T18",G[G.T19=19]="T19",G[G.T20=20]="T20";var ne={AmazonFQDN:z,DeviceTypeId:Q,IsoLanguageCodeMap:J,KeyCode:Z,MarketplaceID:X,PartnerServiceEndpoint:$,StorageKeys:ee,Styling:te,Weblabs:re,WeblabTreatment:Y},ie=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function i(e,t,r,n){(((this.is=this).a=this).an=this).baseName=e,this.target=t,this.targetName=r,(this.negated=n)||(this.not=new i(e,t,r,!0))}return i.of=function(r){return function(e,t){return new i(r,e,t)}},i.check=function(e,t){return new i(null,e,t)},i.prototype.function=function(){return this.checkType("Function")},i.prototype.object=function(){return this.checkType("Object")},i.prototype.number=function(){return this.checkType("Number")},i.prototype.string=function(){return this.checkType("String")},i.prototype.array=function(){return this.checkType("Array")},i.prototype.null=function(){return this.verify(null===this.target,"null")},i.prototype.undefined=function(){return this.verify(void 0===this.target,"undefined")},i.prototype.empty=function(){return this.verify(null===this.target||void 0===this.target||""===this.target||this.isType("Array")&&0===this.target.length||this.isType("Object")&&!this.hasProperties(),"empty")},i.prototype.exists=function(){return this.verify(void 0!==this.target&&null!==this.target,"defined and non-null")},i.prototype.true=function(){return this.verify(!0===this.target,"true")},i.prototype.false=function(){return this.verify(!1===this.target,"false")},i.prototype.checkType=function(e){return this.verify(this.isType(e),"a "+e)},i.prototype.isType=function(e){return Object.prototype.toString.call(this.target)==="[object "+e+"]"},i.prototype.hasProperties=function(){for(var e in this.target)if(this.target.hasOwnProperty(e))return!0;return!1},i.prototype.verify=function(e,t){if(this.negated?e:!e){var r=this.baseName?"["+this.baseName+"] ":"",n=this.targetName?this.targetName+" ("+this.target+")":""+this.target;throw new Error(r+"Check failed: "+n+" was "+(this.negated?"":"not ")+t)}return this.target},i}(),n=r.of,i=r.check;t.of=n,t.check=i});e(ie);ie.of,ie.check;var oe=t(function(e,u){var o={};o.hexTable=new Array(256);for(var t=0;t<256;++t)o.hexTable[t]='%'+((t<16?'0':'')+t.toString(16)).toUpperCase();u.arrayToObject=function(e,t){for(var r=t.plainObjects?Object.create(null):{},n=0,i=e.length;n<i;++n)void 0!==e[n]&&(r[n]=e[n]);return r},u.merge=function(e,t,r){if(!t)return e;if('object'!=typeof t)return Array.isArray(e)?e.push(t):'object'==typeof e?e[t]=!0:e=[e,t],e;if('object'!=typeof e)return e=[e].concat(t);Array.isArray(e)&&!Array.isArray(t)&&(e=u.arrayToObject(e,r));for(var n=Object.keys(t),i=0,o=n.length;i<o;++i){var a=n[i],s=t[a];Object.prototype.hasOwnProperty.call(e,a)?e[a]=u.merge(e[a],s,r):e[a]=s}return e},u.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g,' '))}catch(e){return t}},u.encode=function(e){if(0===e.length)return e;'string'!=typeof e&&(e=''+e);for(var t='',r=0,n=e.length;r<n;++r){var i=e.charCodeAt(r);45===i||46===i||95===i||126===i||48<=i&&i<=57||65<=i&&i<=90||97<=i&&i<=122?t+=e[r]:i<128?t+=o.hexTable[i]:i<2048?t+=o.hexTable[192|i>>6]+o.hexTable[128|63&i]:i<55296||57344<=i?t+=o.hexTable[224|i>>12]+o.hexTable[128|i>>6&63]+o.hexTable[128|63&i]:(++r,i=65536+((1023&i)<<10|1023&e.charCodeAt(r)),t+=o.hexTable[240|i>>18]+o.hexTable[128|i>>12&63]+o.hexTable[128|i>>6&63]+o.hexTable[128|63&i])}return t},u.compact=function(e,t){if('object'!=typeof e||null===e)return e;var r=(t=t||[]).indexOf(e);if(-1!==r)return t[r];if(t.push(e),Array.isArray(e)){for(var n=[],i=0,o=e.length;i<o;++i)void 0!==e[i]&&n.push(e[i]);return n}var a=Object.keys(e);for(i=0,o=a.length;i<o;++i){var s=a[i];e[s]=u.compact(e[s],t)}return e},u.isRegExp=function(e){return'[object RegExp]'===Object.prototype.toString.call(e)},u.isBuffer=function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}}),ae=(oe.arrayToObject,oe.merge,oe.decode,oe.encode,oe.compact,oe.isRegExp,oe.isBuffer,{delimiter:'&',depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,parseValues:function(e,t){for(var r={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0,o=n.length;i<o;++i){var a=n[i],s=-1===a.indexOf(']=')?a.indexOf('='):a.indexOf(']=')+1;if(-1===s)r[oe.decode(a)]='',t.strictNullHandling&&(r[oe.decode(a)]=null);else{var u=oe.decode(a.slice(0,s)),c=oe.decode(a.slice(s+1));Object.prototype.hasOwnProperty.call(r,u)?r[u]=[].concat(r[u]).concat(c):r[u]=c}}return r},parseObject:function(e,t,r){if(!e.length)return t;var n,i=e.shift();if('[]'===i)n=(n=[]).concat(ae.parseObject(e,t,r));else{n=r.plainObjects?Object.create(null):{};var o='['===i[0]&&']'===i[i.length-1]?i.slice(1,i.length-1):i,a=parseInt(o,10),s=''+a;!isNaN(a)&&i!==o&&s===o&&0<=a&&r.parseArrays&&a<=r.arrayLimit?(n=[])[a]=ae.parseObject(e,t,r):n[o]=ae.parseObject(e,t,r)}return n},parseKeys:function(e,t,r){if(e){r.allowDots&&(e=e.replace(/\.([^\.\[]+)/g,'[$1]'));var n=/(\[[^\[\]]*\])/g,i=/^([^\[\]]*)/.exec(e),o=[];if(i[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(i[1])&&!r.allowPrototypes)return;o.push(i[1])}for(var a=0;null!==(i=n.exec(e))&&a<r.depth;)++a,(r.plainObjects||!Object.prototype.hasOwnProperty(i[1].replace(/\[|\]/g,''))||r.allowPrototypes)&&o.push(i[1]);return i&&o.push('['+e.slice(i.index)+']'),ae.parseObject(o,t,r)}}}),se=function(e,t){if((t=t||{}).delimiter='string'==typeof t.delimiter||oe.isRegExp(t.delimiter)?t.delimiter:ae.delimiter,t.depth='number'==typeof t.depth?t.depth:ae.depth,t.arrayLimit='number'==typeof t.arrayLimit?t.arrayLimit:ae.arrayLimit,t.parseArrays=!1!==t.parseArrays,t.allowDots='boolean'==typeof t.allowDots?t.allowDots:ae.allowDots,t.plainObjects='boolean'==typeof t.plainObjects?t.plainObjects:ae.plainObjects,t.allowPrototypes='boolean'==typeof t.allowPrototypes?t.allowPrototypes:ae.allowPrototypes,t.parameterLimit='number'==typeof t.parameterLimit?t.parameterLimit:ae.parameterLimit,t.strictNullHandling='boolean'==typeof t.strictNullHandling?t.strictNullHandling:ae.strictNullHandling,''===e||null==e)return t.plainObjects?Object.create(null):{};for(var r='string'==typeof e?ae.parseValues(e,t):e,n=t.plainObjects?Object.create(null):{},i=Object.keys(r),o=0,a=i.length;o<a;++o){var s=i[o],u=ae.parseKeys(s,r[s],t);n=oe.merge(n,u,t)}return oe.compact(n)},ue=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=ie.of("QueryString"),r=function(){function n(){}return n.getParameter=function(e,t){i(e,"name").exists();var r=n.getQueryString(t);return r.hasOwnProperty(e)?r[e]:null},n.getQueryString=function(e){if(null==e){if(void 0===location||void 0===location.search)return{};e=location.search}try{var t=se(e.replace(/^\?/,""));return n.parseStrings(t)}catch(e){return{}}},n.parseStrings=function(e){if(C.isString(e)){if(/^true$/i.test(e))return!0;if(/^false$/i.test(e))return!1;if(/^null$/i.test(e))return null;if(/^undefined$/i.test(e))return;return/^\d+$/.test(e)?parseInt(e,10):e}if(C.isArray(e)||C.isObject(e)){var t=C.isArray(e)?[]:{};for(var r in e)e.hasOwnProperty(r)&&(t[r]=this.parseStrings(e[r]));return t}return e},n}();t.QueryString=r});e(ue);ue.QueryString;var ce=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){void 0===t&&(t=window);var n=this;this.VERSION=1,this.dbOpenRequest=null,this.pendingDbOperations=[],this.database=null,this.tryInitialize=function(e){n.database||!r.isSupported(n.windowRef)?e():(n.pendingDbOperations.push(e),n.dbOpenRequest||n.initialize(function(){for(var e=0,t=n.pendingDbOperations;e<t.length;e++){var r=t[e];"function"==typeof r&&r()}n.dbOpenRequest=null,n.pendingDbOperations=[]}))},this.initialize=function(t){try{var e=n.windowRef.indexedDB.open(n.dbName,n.VERSION);e.onsuccess=function(e){try{n.database=e.target.result}catch(e){}t()},e.onupgradeneeded=function(e){e.oldVersion<1&&(n.database=e.target.result,n.database.createObjectStore(n.dbName))},e.onerror=function(e){e.preventDefault(),t()}}catch(e){t()}},this.dbName=e,this.windowRef=t}return r.prototype.get=function(t,n){var i=this;this.tryInitialize(function(){try{if(!i.database)return n();var r=(new Date).getTime(),e=i.database.transaction([i.dbName],"readonly").objectStore(i.dbName).get(t);e.onsuccess=function(e){try{var t=e.target.result;n(t,(new Date).getTime()-r)}catch(e){n()}},e.onerror=function(){n()}}catch(e){n()}})},r.prototype.set=function(e,t){var r=this;this.tryInitialize(function(){try{r.database&&r.database.transaction([r.dbName],"readwrite").objectStore(r.dbName).put(t,e)}catch(e){}})},r.prototype.clear=function(){var e=this;this.tryInitialize(function(){try{e.database&&e.database.transaction([e.dbName],"readwrite").objectStore(e.dbName).clear()}catch(e){}})},r.isSupported=function(e){return void 0===e&&(e=window),void 0!==e.indexedDB},r}();t.IndexedDBStorage=r});e(ce);ce.IndexedDBStorage;var le=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBStorage=ce.IndexedDBStorage});e(le);le.IndexedDBStorage;var pe=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){void 0===e&&(e=12e4),void 0===t&&(t=2),void 0===r&&(r=document);var n=this;this.scriptErrorCount=0,this.scriptLoaded=!1,this.onScriptError=function(e,t,r){e&&(e.onload=e.onerror=e.onreadystatechange=null),clearTimeout(n.scriptTimerId),n.objectExists(n.scriptInfo.name)||(++n.scriptErrorCount<n.maxAttempts?(n.onNonFatal(t),n.setScript(r)):n.onFatal(t))},this.scriptTimeoutMs=e,this.maxAttempts=t,this.documentInstance=r}return e.prototype.get=function(e,t,r,n,i){void 0===i&&(i=!1),this.scriptInfo=e,this.onLoad=t,this.onNonFatal=r,this.onFatal=n,this.scriptErrorCount=0,this.scriptLoaded=!1,this.bustCache=i,clearTimeout(this.scriptTimerId),this.setScript(this.scriptInfo.url)},e.prototype.setScript=function(t){var r=this,n=this.documentInstance.createElement("script");this.scriptTimerId=setTimeout(function(){r.onScriptError(n,new Error("Script load timed out. "+r.scriptInfo.name+" for "+t),t)},this.scriptTimeoutMs);var i=(new Date).getTime();n.setAttribute("crossorigin","anonymous"),n.onload=n.onreadystatechange=function(){if(!r.scriptLoaded&&(void 0===n.readyState||"loaded"===n.readyState||"complete"===n.readyState))if(r.objectExists(r.scriptInfo.name)){clearTimeout(r.scriptTimerId),r.scriptLoaded=!0;var e=(new Date).getTime()-i;n.onload=n.onerror=n.onreadystatechange=null,r.onLoad({cached:!1,downloadMs:e,totalMs:e})}else r.onScriptError(n,new Error("Script loaded but missing result object. Expected "+r.scriptInfo.name+" for "+t),t)},n.onerror=function(){r.onScriptError(n,new Error("Script onerror fired: "+r.scriptInfo.name+" for "+t),t)};var e=this.bustCache?"?t="+(new Date).getTime():"";n.src=t+e,this.documentInstance.getElementsByTagName("head")[0].appendChild(n)},e.prototype.objectExists=function(e){return void 0!==window[e]},e}();t.JavaScriptLoader=r});e(pe);pe.JavaScriptLoader;var fe=t(function(e,t){var r,n;Object.defineProperty(t,"__esModule",{value:!0}),(n=r||(r={}))[n.JavaScript=0]="JavaScript",n[n.JSON=1]="JSON",t.ScriptType=r});e(fe);fe.ScriptType;var de=t(function(e,t){var r;r=function(e){e.version='0.4.0';var a=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return'undefined'!=typeof Int32Array?new Int32Array(t):t}(),i='undefined'!=typeof Buffer;function o(e){for(var t=-1,r=0,n=e.length-7;r<n;)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])];for(;r<n+7;)t=t>>>8^a[255&(t^e[r++])];return-1^t}e.table=a,e.bstr=function(e){if(32768<e.length&&i)return o(new Buffer(e));for(var t=-1,r=e.length-1,n=0;n<r;)t=a[255&(t^e.charCodeAt(n++))]^t>>>8,t=a[255&(t^e.charCodeAt(n++))]^t>>>8;return n===r&&(t=t>>>8^a[255&(t^e.charCodeAt(n))]),-1^t},e.buf=function(e){if(1e4<e.length)return o(e);for(var t=-1,r=0,n=e.length-3;r<n;)t=(t=(t=(t=t>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])];for(;r<n+3;)t=t>>>8^a[255&(t^e[r++])];return-1^t},e.str=function(e){for(var t,r,n=-1,i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))<128?n=n>>>8^a[255&(n^t)]:t<2048?n=(n=n>>>8^a[255&(n^(192|t>>6&31))])>>>8^a[255&(n^(128|63&t))]:55296<=t&&t<57344?(t=64+(1023&t),r=1023&e.charCodeAt(i++),n=(n=(n=(n=n>>>8^a[255&(n^(240|t>>8&7))])>>>8^a[255&(n^(128|t>>2&63))])>>>8^a[255&(n^(128|r>>6&15|(3&t)<<4))])>>>8^a[255&(n^(128|63&r))]):n=(n=(n=n>>>8^a[255&(n^(224|t>>12&15))])>>>8^a[255&(n^(128|t>>6&63))])>>>8^a[255&(n^(128|63&t))];return-1^n}},'undefined'==typeof DO_NOT_EXPORT_CRC?r(t):r({})}),he=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var v="X-Server-IP",r=function(){function e(e,t){void 0===e&&(e=XMLHttpRequest),void 0===t&&(t=de.str);var y=this;this.makeXHRRequest=function(n,u,i,o,c,a,s,l){void 0===l&&(l=0);var p=new y.XHR,f="",d=function(e){e||(e={type:"unknown error"});var t=new Error("XHR "+e.type+" for "+n+". Status: "+p.status+", readyState: "+p.readyState),r={attempt:l,cloudfrontRequestID:p.getResponseHeader("x-amz-cf-id"),contentHash:e.contentHash,contentLength:e.contentLength,contentLengthHeader:-1!==f.indexOf("Content-Length")?p.getResponseHeader("Content-Length"):null,serverIP:-1!==f.indexOf(v)?p.getResponseHeader(v):null};0<o?(a(t,r),y.makeXHRRequest(n,u,i,--o,c,a,s,l+1)):s(t,r)},h=y.now(),m=h;p.addEventListener("readystatechange",function(){2===p.readyState&&(m=y.now())}),p.addEventListener("load",function(){if(f=p.getAllResponseHeaders(),200===p.status){var e=p.responseText,t=y.now(),r=!0,n=null,i="(not checked)";if(u){var o=y.now();r=(i=""+y.toCRC32(e))===u,n=y.now()-o}if(r)c(e,{cached:!1,latencyMs:m-h,downloadMs:t-m,verifyMs:n,serverIP:-1!==f.indexOf(v)?p.getResponseHeader(v):null});else{var a=e?e.length:0,s=0<a?"["+e.substr(0,15)+"]":"(empty)";d({type:"verify failed "+s,contentLength:a,contentHash:i})}}else d({type:"bad response"})}),p.addEventListener("error",d),p.addEventListener("timeout",d);var e=0===l?"":"?t="+y.now();p.open("GET",n+e),p.timeout=i,p.send()},this.XHR=e,this.toCRC32=t}return e.prototype.isSupported=function(){return"withCredentials"in new this.XHR},e.prototype.get=function(e,t,r,n,i,o,a){this.makeXHRRequest(e,t,r,n,i,o,a)},e.prototype.now=function(){return(new Date).getTime()},e}();t.SimpleURLAcquirer=r});e(he);he.SimpleURLAcquirer;var me=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n){void 0===e&&(e=new pe.JavaScriptLoader),void 0===t&&(t=new he.SimpleURLAcquirer),void 0===r&&(r=new le.IndexedDBStorage("ScriptStore"));var o=this;this.SCRIPT_TYPES_XHR_REQUIRED=[fe.ScriptType.JSON],this.XHR_TIMEOUT_MS=12e4,this.XHR_RETRIES=2,this.loadJsonFromString=function(t,e,r){try{var n=(new Date).getTime();r.payload=JSON.parse(e),r.parseMs=(new Date).getTime()-n,r.totalMs=o.calculateTotalLoadMs(r),t.onLoad(r)}catch(e){o.onError(t,e)}},this.loadJavaScriptFromString=function(t,e,r){try{var n=new Blob([e],{type:"application/javascript"}),i={url:o.createObjectURL(n),name:t.scriptInfo.name,type:t.scriptInfo.type,version:t.scriptInfo.version};o.javaScriptLoader.get(i,function(e){r.parseMs=e.downloadMs,r.totalMs=o.calculateTotalLoadMs(r),t.onLoad(r)},t.onNonFatal,function(e){return o.onError(t,e)})}catch(e){o.onError(t,e)}},this.loadJavaScriptFromOrigin=function(e){o.javaScriptLoader.get(e.scriptInfo,e.onLoad,e.onNonFatal,e.onFatal,!0)},this.loadJsonFromOrigin=function(r){o.urlAcquirer.get(r.scriptInfo.url,r.scriptInfo.crc32,o.XHR_TIMEOUT_MS,o.XHR_RETRIES,function(e,t){o.loadFromString(r,e,t)},function(e){r.onNonFatal(e)},function(e){r.onFatal(e)})},this.javaScriptLoader=e,this.urlAcquirer=t,this.offlineStorage=r,this.loadFromStringFunctions={},this.loadFromStringFunctions[fe.ScriptType.JavaScript]=this.loadJavaScriptFromString,this.loadFromStringFunctions[fe.ScriptType.JSON]=this.loadJsonFromString,this.loadFromOriginFunctions={},this.loadFromOriginFunctions[fe.ScriptType.JavaScript]=this.loadJavaScriptFromOrigin,this.loadFromOriginFunctions[fe.ScriptType.JSON]=this.loadJsonFromOrigin,!this.isDefined(n)&&this.isDefined(window.URL)?this.createObjectURL=URL.createObjectURL:this.createObjectURL=n}return e.prototype.getContent=function(e,t){var r=this.requiresUrlAcquirer(e.scriptInfo.type);r&&!this.urlAcquirer.isSupported()?e.onFatal(new Error("URLAcquirer not supported but "+fe.ScriptType[e.scriptInfo.type]+" requires it.")):!r&&this.onlySupportsOrigin()?this.loadFromOrigin(e):this.offlineStorage.get(e.scriptInfo.name,t)},e.prototype.loadFromString=function(e,t,r){var n=this.loadFromStringFunctions[e.scriptInfo.type];this.isDefined(n)?n(e,t,r):e.onFatal(new Error("No loadFromString function found for "+fe.ScriptType[e.scriptInfo.type]))},e.prototype.loadFromOrigin=function(e){var t=this.loadFromOriginFunctions[e.scriptInfo.type];this.isDefined(t)?t(e):e.onFatal(new Error("No loadFromOrigin function found for "+fe.ScriptType[e.scriptInfo.type]))},e.prototype.acquireNewAsset=function(r,n,i){var o=this;void 0===i&&(i=!0),this.urlAcquirer.get(r.scriptInfo.url,r.scriptInfo.crc32,this.XHR_TIMEOUT_MS,this.XHR_RETRIES,function(e,t){i&&o.offlineStorage.set(r.scriptInfo.name,{version:r.scriptInfo.version,data:e}),n&&o.loadFromString(r,e,t)},function(e,t){r.onNonFatal(e,t)},function(e,t){n&&o.onError(r,e,t)})},e.prototype.onError=function(e,t,r){e.onNonFatal(t,r),this.loadFromOrigin(e)},e.prototype.requiresUrlAcquirer=function(e){return-1!==this.SCRIPT_TYPES_XHR_REQUIRED.indexOf(e)},e.prototype.onlySupportsOrigin=function(){return!(this.isDefined(window.Blob)&&this.urlAcquirer.isSupported())},e.prototype.isDefined=function(e){return void 0!==e},e.prototype.nonNumberToZero=function(e){return"number"==typeof e?e:0},e.prototype.calculateTotalLoadMs=function(e){return this.nonNumberToZero(e.cacheLoadMs)+this.nonNumberToZero(e.latencyMs)+this.nonNumberToZero(e.downloadMs)+this.nonNumberToZero(e.verifyMs)+this.nonNumberToZero(e.parseMs)},e}();t.BaseCachingScriptLoader=r});e(me);me.BaseCachingScriptLoader;var ye=t(function(e,t){var n,r=a&&a.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(i){function e(e,t,r,n){return i.call(this,e,t,r,n)||this}return r(e,i),e.prototype.get=function(r,e,t,n){var i=this,o={scriptInfo:r,onLoad:e,onNonFatal:t,onFatal:n};this.getContent(o,function(e,t){e?(i.loadFromString(o,e.data,{cached:!0,cacheLoadMs:t}),e.version!==r.version&&i.acquireNewAsset(o,!1)):i.acquireNewAsset(o,!0)})},e}(me.BaseCachingScriptLoader);t.LazyCachingScriptLoader=i});e(ye);ye.LazyCachingScriptLoader;var ve=t(function(e,t){var n,r=a&&a.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(i){function e(e,t,r,n){return i.call(this,e,t,r,n)||this}return r(e,i),e.prototype.get=function(r,e,t,n,i){var o=this;void 0===i&&(i=!0);var a={scriptInfo:r,onLoad:e,onNonFatal:t,onFatal:n};i?this.getContent(a,function(e,t){e&&e.version===r.version?o.loadFromString(a,e.data,{cached:!0,cacheLoadMs:t}):o.acquireNewAsset(a,!0)}):this.onlySupportsOrigin()?this.loadFromOrigin(a):this.acquireNewAsset(a,!0,!1)},e}(me.BaseCachingScriptLoader);t.TransparentCachingScriptLoader=i});e(ve);ve.TransparentCachingScriptLoader;var ge=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LazyCachingScriptLoader=ye.LazyCachingScriptLoader,t.TransparentCachingScriptLoader=ve.TransparentCachingScriptLoader,t.JavaScriptLoader=pe.JavaScriptLoader,t.ScriptType=fe.ScriptType});e(ge);ge.LazyCachingScriptLoader,ge.TransparentCachingScriptLoader,ge.JavaScriptLoader,ge.ScriptType;var _e=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=["/"];t.AssetRoots=r;try{t.AssetRoots=r=JSON.parse('["https://cloudfront.xp-assets.aiv-cdn.net/packages/ATVWebPlayerSDK-1.0/prod/","https://lvlt.xp-assets.aiv-cdn.net/packages/ATVWebPlayerSDK-1.0/prod/","https://limelight.xp-assets.aiv-cdn.net/packages/ATVWebPlayerSDK-1.0/prod/"]')}catch(e){}});e(_e);_e.AssetRoots;var be=t(function(e,t){var r,n;Object.defineProperty(t,"__esModule",{value:!0}),(n=r||(r={}))[n.BROWSER_OUT_OF_DATE=0]="BROWSER_OUT_OF_DATE",n[n.MISSING_CODEC=1]="MISSING_CODEC",n[n.MISSING_CODEC_IN_PLAYREADY_CDM=2]="MISSING_CODEC_IN_PLAYREADY_CDM",n[n.MISSING_FAIRPLAY_CDM=3]="MISSING_FAIRPLAY_CDM",n[n.MISSING_PLAYREADY_CDM=4]="MISSING_PLAYREADY_CDM",n[n.MISSING_WIDEVINE_CDM=5]="MISSING_WIDEVINE_CDM",n[n.MISSING_MEDIASOURCE=6]="MISSING_MEDIASOURCE",n[n.UNSUPPORTED_BROWSER=7]="UNSUPPORTED_BROWSER",n[n.UNSUPPORTED_OS=8]="UNSUPPORTED_OS",t.UnsupportedReason=r});e(be);be.UnsupportedReason;var Se=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="Loader",n="loader_error",i=function(){function e(){}return e.createLoaderError=function(e,t){switch(void 0===t&&(t=!0),e){case be.UnsupportedReason.UNSUPPORTED_OS:return{code:4003,name:"UNSUPPORTED_OS",description:"Unsupported OS",message:"Video can't be watched on this device because the operating system isn't supported.",domain:r,internalCode:n};case be.UnsupportedReason.UNSUPPORTED_BROWSER:return{code:4004,name:"UNSUPPORTED_BROWSER",description:"Unsupported Web browser",message:"This web browser is not currently supported. Please use the latest version of one of the following web browsers: Google Chrome, Mozilla Firefox, Microsoft Edge,"+(t?"":" Windows Internet Explorer, Apple Safari,")+" or Opera.",domain:r,internalCode:n};case be.UnsupportedReason.BROWSER_OUT_OF_DATE:return{code:4005,name:"BROWSER_OUT_OF_DATE",description:"Browser update required",message:"A later version of this browser is required to play this video. Please update to the latest version of your browser and try again.",domain:r,internalCode:n};case be.UnsupportedReason.MISSING_CODEC:return{code:4010,name:"MISSING_CODEC",description:"Missing codec",message:"Video or audio content type is not supported by your browser.",domain:r,internalCode:n};case be.UnsupportedReason.MISSING_CODEC_IN_PLAYREADY_CDM:return{code:4011,name:"MISSING_CODEC_IN_PLAYREADY_CDM",description:"Missing codec in PlayReady CDM",message:"Video or audio content type is not supported by your browser",domain:r,internalCode:n};case be.UnsupportedReason.MISSING_FAIRPLAY_CDM:return{code:4012,name:"MISSING_FAIRPLAY_CDM",description:"Digital Rights Error",message:"Your web browser is missing a digital rights component",domain:r,internalCode:n};case be.UnsupportedReason.MISSING_PLAYREADY_CDM:return{code:4013,name:"MISSING_PLAYREADY_CDM",description:"Digital Rights Error",message:"Your web browser is missing a digital rights component",domain:r,internalCode:n};case be.UnsupportedReason.MISSING_WIDEVINE_CDM:return{code:4014,name:"MISSING_WIDEVINE_CDM",description:"Digital Rights Error",message:"Your web browser is missing a digital rights component",domain:r,internalCode:n};case be.UnsupportedReason.MISSING_MEDIASOURCE:return{code:4015,name:"MISSING_MEDIASOURCE",description:"MediaSource is not supported by the user agent.",message:"MediaSource is not supported by the user agent.",domain:r,internalCode:n};default:return{code:4100,name:"UNKNOWN_LOAD_ERROR",description:"Unknown loader error",message:"An unknown error occurred while loading the WebPlayerSDK.",domain:r,internalCode:n}}},e}();t.LoaderErrorCreator=i});e(Se);Se.LoaderErrorCreator;var Ee=t(function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MarketplaceToConfigMap=((r={})[ne.MarketplaceID.DE]={region:"eu",marketplace:"de"},r[ne.MarketplaceID.JP]={region:"fe",marketplace:"jp"},r[ne.MarketplaceID.ROE_EU]={region:"eu",marketplace:"roe_eu"},r[ne.MarketplaceID.ROW_EU]={region:"eu",marketplace:"row_eu"},r[ne.MarketplaceID.ROW_FE]={region:"fe",marketplace:"row_fe"},r[ne.MarketplaceID.ROW_NA]={region:"na",marketplace:"row_na"},r[ne.MarketplaceID.UK]={region:"eu",marketplace:"uk"},r[ne.MarketplaceID.US]={region:"na",marketplace:"us"},r)});e(Ee);Ee.MarketplaceToConfigMap;var we=t(function(e,t){var o=a&&a.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r={cloudfront:"cloudfront",limelight:"limelight",lvlt:"level3"},n=function(){function e(e,t){void 0===t&&(t=null),this.marketplaceConfig=Ee.MarketplaceToConfigMap[ne.MarketplaceID.US],this.marketplaceId=e,this.clientId=t,this.sessionId=(""+Math.random()).substr(2);var r=Ee.MarketplaceToConfigMap[e];null!=r&&(this.marketplaceConfig=r)}return e.prototype.reportDownloadError=function(e){this.reportWithCDN("XpJavaScriptDownloadError","1",e)},e.prototype.reportDownloadSuccess=function(e,t){this.reportWithCDN("XpJavaScriptDownloadTime",t+":u=ms",e)},e.prototype.reportWithCDN=function(e,t,r){this.report(e,t);var n=this.getCDN(r);null!=n&&this.report(e+"."+n,t)},e.prototype.report=function(e,t){var r="https://fls-"+this.marketplaceConfig.region+".amazon.com/1/action-impressions/1/OP/aiv-web-player/action",n="HTML5Player:."+e+"@v="+t,i={marketplace:this.marketplaceConfig.marketplace,marketplaceId:this.marketplaceId,service:"AIVWebPlayer",session:this.sessionId};(new Image).src=r+"/"+n+"?"+this.objectToQueryParamsString(o({},i,{requestId:Math.random().toString().substr(2)})),null!=this.clientId&&((new Image).src=r+"/"+n+"?"+this.objectToQueryParamsString(o({},i,{instance:this.clientId,requestId:Math.random().toString().substr(2)})))},e.prototype.getCDN=function(e){var t=this.getSubdomain(e);return null!=t&&this.isValidCDN(t)?r[t]:null},e.prototype.getSubdomain=function(e){var t=e.match("https?://([^.]+)?\\.");return null==t||null==t[1]?null:t[1]},e.prototype.objectToQueryParamsString=function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},e.prototype.isValidCDN=function(e){return-1!==Object.keys(r).indexOf(e)},e}();t.TinyMetricsReporter=n});e(we);we.TinyMetricsReporter;var Te=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var l=c.get("WebPlayerSDKLoader"),r=function(){function e(e){this.blobScriptLoader=new ge.TransparentCachingScriptLoader,this.scriptTagScriptLoader=new ge.JavaScriptLoader,this.metricsReporter=new we.TinyMetricsReporter(e.marketplaceId,e.clientId)}return Object.defineProperty(e.prototype,"playerCacheEnabled",{get:function(){var e=ue.QueryString.getParameter("playerCache");return null==e||e},enumerable:!0,configurable:!0}),e.prototype.acquireSDK=function(){return this.tryAcquireSDK()},e.prototype.tryAcquireSDK=function(t){var o=this;void 0===t&&(t=0);var a=_e.AssetRoots[t],s={url:a+"ATVWebPlayerSDK.js",name:"ATVWebPlayerSDK",type:ge.ScriptType.JavaScript,version:"0.0.0.0"},u=this.playerCacheEnabled?this.blobScriptLoader:this.scriptTagScriptLoader,c=Date.now();return new V.Promise(function(e,t){var r=function(){o.metricsReporter.reportDownloadSuccess(a,Date.now()-c),e(window.ATVWebPlayerSDK)},n=function(e,t){var r=o.getErrorString(e),n=JSON.stringify(t);l.error(r+", note: "+n)},i=function(e){o.metricsReporter.reportDownloadError(a),t(Se.LoaderErrorCreator.createLoaderError())};u===o.blobScriptLoader?u.get(s,r,n,i,!1):u.get(s,r,n,i)}).catch(function(e){return t===_e.AssetRoots.length-1?V.Promise.reject(e):o.tryAcquireSDK(++t)})},e.prototype.getErrorString=function(e){return e&&C.isFunction(e.toString)?e.toString():"Unknown Error"},e}();t.BundleAcquirer=r});e(Te);Te.BundleAcquirer;var Ie,Oe,Re,Ae=ie.of("AmazonUrlCreator"),Pe=function(){function o(e,t,r){void 0===r&&(r=window),this.marketplaceId=Ae(e,"marketplaceId").exists(),this.csUrlPathMap=Ae(t,"csUrlPathMap").exists(),this.windowRef=Ae(r,"windowRef").exists()}return o.prototype.createCSUrl=function(e){Ae(this.csUrlPathMap[e],"csUrlPathMap[csUrlPathKey]").exists();var t=this.windowRef.location.hostname,r=t,n=this.csUrlPathMap[e][r];(C.isNull(n)||C.isUndefined(n))&&(t=z.fromMarketplaceId(this.marketplaceId),r=this.marketplaceId);var i=this.csUrlPathMap[e][r];return(C.isNull(i)||C.isUndefined(i))&&(r=o.DEFAULT_ID),t+this.csUrlPathMap[e][r]},o.prototype.createDetailPageUrl=function(e){var t=this.windowRef.location.hostname;return z.isAmazon(t,this.windowRef)||(t=z.fromMarketplaceId(this.marketplaceId)),t+o.DETAIL_PAGE_BASE+e},o.DEFAULT_ID="*",o.DETAIL_PAGE_BASE="/dp/",o}(),Le=c.get("CookieStorage"),Me=function(){function e(e){void 0===e&&(e=document),this.document=e}return e.prototype.get=function(t){try{if(null==this.document.cookie)return Le.warn("Cookie is unavailable."),null;var e=C.map(this.document.cookie.split(";"),function(e){return e.split("=")}),r=C.find(e,function(e){return e[0].trim()===t});return null==r?(Le.warn("Cannot find key "+t+" in storage"),null):(r.shift(),decodeURIComponent(r.join("=")))}catch(e){return Le.warn("Failed to retrieve key "+t+" from storage",e),null}},e}(),Ce=function(){function e(){}return e.getPlayerSize=function(e,t,r){return void 0===r&&(r=1),{width:e*r,height:t*r}},e}(),De=ie.of("DOMUtils"),ke=function(){function e(){}return e.getAttributeOrThrow=function(e,t){De(e,"element").exists(),De(t,"attribute").exists();var r=e.getAttribute(t);if(null===r)throw new Error("Unable to get attribute '"+t+"'");return r},e.querySelectOrThrow=function(e,t){De(e,"element").exists(),De(t,"query").exists();var r=e.querySelector(t);if(null===r)throw new Error("Unable to querySelect '"+t+"'");return r},e.querySelectAllOrThrow=function(e,t){De(e,"element").exists(),De(t,"query").exists();var r=e.querySelectorAll(t);if(null===r||0===r.length)throw new Error("Unable to querySelectAll '"+t+"'");return r},e.getAttributesInNamespace=function(e,t){var r=[];if(t+=":",e.hasAttributes())for(var n=0;n<e.attributes.length;n++)e.attributes[n].name.substr(0,t.length)===t&&r.push(e.attributes[n].name);return r},e.getAttributeWithoutNamespace=function(e){var t=e.match(/.*:(.*)/);return null===t||t.length<2?e:t[1]},e}(),Ne=c.get("EnumUtils"),xe=function(){function e(){}return e.getEnumValue=function(t,e){if(null==t)return null;if(!C.isString(t))return Ne.warn("Value must be a string but was "+t),null;if(C.isEmpty(t))return Ne.warn("Value cannot be an empty string"),null;var r=[];for(var n in e)C.isNumber(e[n])&&r.push(n);var i=C.find(r,function(e){return e.toLowerCase()===t.toLowerCase()});return null==i?(Ne.warn("Value must be one of ["+r.join(",")+"], but was "+t),null):e[i]},e}(),Fe=function(){function e(e){this.ephemeralIds=[],this.logger=c.get(e)}return e.prototype.log=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.logger).log.apply(e,[this.getId()].concat(t))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.logger).info.apply(e,[this.getId()].concat(t))},e.prototype.warn=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.logger).warn.apply(e,[this.getId()].concat(t))},e.prototype.error=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.logger).error.apply(e,[this.getId()].concat(t))},e.prototype.setId=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.ephemeralIds=e},e.prototype.getId=function(){return C.map(this.ephemeralIds,function(e){return"["+e+"]"}).join(" ")},e}(),We=function(){function e(){this.timer=W.timer}return e.prototype.throttle=function(r,n){var i=null,o=null,a=null,s=0,u=function(){s=C.now(),i=null,r.apply(o,a),null==i&&(a=o=null)},c=this;return function(){var e=C.now(),t=n-(e-s);o=c,a=arguments,t<=0||n<t?(i&&(c.timer.clearTimeout(i),i=null),s=e,r.apply(o,a),null==i&&(a=o=null)):null==i&&(i=c.timer.setTimeout(u,t))}},e}(),Ue=ie.of("HTMLElementUtils"),Ve=function(){function t(){}return t.addClass=function(e,t){if(void 0!==e.className){var r=e.className.split(" ");void 0===C.find(r,function(e){return e===t})&&(e.className+=" "+t)}},t.removeClass=function(e,t){if(void 0!==e.className){var r=e.className.split(" ");void 0!==C.find(r,function(e){return e===t})&&(r=C.filter(r,function(e){return e!==t}),e.className=r.join(" "))}},t.getElementsByClassName=function(e,t){return C.isUndefined(e.getElementsByClassName)?e.querySelectorAll("."+t):e.getElementsByClassName(t)},t.clickedInElement=function(e,t){Ue(e,"element").exists(),Ue(t,"event").exists();var r=e.getBoundingClientRect();return r.left<t.clientX&&r.left+e.offsetWidth>t.clientX&&r.top<t.clientY&&r.top+e.offsetHeight>t.clientY},t.isScrollable=function(e){return e.scrollHeight>e.offsetHeight+t.SCROLLABLE_MARGIN_OF_ERROR_PX},t.SCROLLABLE_MARGIN_OF_ERROR_PX=1,t}(),je="(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))",He=new RegExp("^"+je+"\\."+je+"\\."+je+"\\."+je+"$"),Be=function(){function e(){}return e.isValidIPv4Address=function(e){return He.test(e)},e}(),qe=c.get("WebStorage"),Ke=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.storage=e,this.namespace=t}return e.prototype.set=function(e,t){if(null!==this.storage){var r=this.getNamespacedKey(e);try{this.storage.setItem(r,t)}catch(e){qe.warn("Failed to save key "+r+" to storage",e)}}else qe.warn("Storage is unavailable.")},e.prototype.get=function(e){if(null===this.storage)return qe.warn("Storage is unavailable."),null;var t=this.getNamespacedKey(e);try{var r=this.storage.getItem(t);return null!=r||null!=this.namespace&&null!=(r=this.storage.getItem(e))&&this.set(e,r),r}catch(e){return qe.warn("Failed to retrieve key "+t+" from storage",e),null}},e.prototype.remove=function(e){if(null!==this.storage){var t=this.getNamespacedKey(e);try{this.storage.removeItem(t),null!=this.namespace&&this.storage.removeItem(e)}catch(e){qe.warn("Failed to remove key "+t+" from storage",e)}}else qe.warn("Storage is unavailable.")},e.prototype.removeAll=function(){if(null!==this.storage)try{this.storage.clear()}catch(e){qe.warn("Failed to clear storage",e)}else qe.warn("Storage is unavailable.")},e.prototype.getNamespacedKey=function(e){return null!=this.namespace?""+this.namespace+e:e},e}(),Ye=a&&a.__extends||(Ie=function(e,t){return(Ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Ie(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ge=function(t){function e(e){return void 0===e&&(e=window),t.call(this,void 0===e.localStorage?null:e.localStorage,"atvwebplayersdk_")||this}return Ye(e,t),e}(Ke),Xe=c.get("MimeTypeParser");(Re=Oe||(Oe={}))[Re.ParsingType=0]="ParsingType",Re[Re.ParsingSubtype=1]="ParsingSubtype",Re[Re.ParsingParameterName=2]="ParsingParameterName",Re[Re.StartParsingParameterValue=3]="StartParsingParameterValue",Re[Re.ParsingUnquotedParameterValue=4]="ParsingUnquotedParameterValue",Re[Re.ParsingQuotedParameterValue=5]="ParsingQuotedParameterValue",Re[Re.CompleteParsingParameterValue=6]="CompleteParsingParameterValue",Re[Re.FinishParsingNoPendingParameter=7]="FinishParsingNoPendingParameter";var ze,Qe,Je=function(){function e(){}return e.prototype.parse=function(e){var t={text:e,index:0,parameterName:"",parameterValue:"",mimeTypeObject:{type:"",subtype:"",parameters:{}}};return this.parseMimeType(t)},e.prototype.parseMimeType=function(e){for(var t=Oe.ParsingType;e.index<e.text.length;)switch(t){case Oe.ParsingType:t=this.parseType(e);break;case Oe.ParsingSubtype:t=this.parseSubtype(e);break;case Oe.ParsingParameterName:t=this.parseParameterName(e);break;case Oe.StartParsingParameterValue:t=this.handleStartParsingParameterValue(e);break;case Oe.CompleteParsingParameterValue:t=this.handleCompleteParsingParameterValue(e)}return this.handleEndParsing(e,t),e.mimeTypeObject},e.prototype.parseType=function(e){var t=e.text.indexOf("/");if(0<t)return e.mimeTypeObject.type=e.text.substring(e.index,t).trim(),e.index=t+1,Oe.ParsingSubtype;throw new Error("Encountered malformed top type while parsing \""+e.text.substring(e.index)+"\".")},e.prototype.parseSubtype=function(e){var t=e.text.indexOf(";",e.index);return 0<t?(e.mimeTypeObject.subtype=this.extractSubtype(e,t),e.index=t+1,Oe.ParsingParameterName):(e.mimeTypeObject.subtype=this.extractSubtype(e),e.index=e.text.length,Oe.FinishParsingNoPendingParameter)},e.prototype.extractSubtype=function(e,t){var r=e.text.substring(e.index,t).trim();if(0===r.length)throw new Error("Encountered empty subtype while parsing \""+e.text.substring(e.index)+"\".");return r},e.prototype.parseParameterName=function(e){var t=e.text.indexOf("=",e.index);return t>e.index?(e.parameterName=this.extractParameterName(e,t),0===e.parameterName.length?(e.index=e.text.length,Oe.FinishParsingNoPendingParameter):(e.index=t+1,Oe.StartParsingParameterValue)):(Xe.warn("Encountered malformed parameter name while parsing \""+e.text.substring(e.index)+"\"."),e.index=e.text.length,Oe.FinishParsingNoPendingParameter)},e.prototype.extractParameterName=function(e,t){var r=e.text.substring(e.index,t).trim();return 0===r.length?(Xe.warn("Encountered empty parameter name while parsing \""+e.text.substring(e.index)+"\"."),r):-1!==r.indexOf(";")?(Xe.warn("Encountered malformed parameter name while parsing \""+e.text.substring(e.index)+"\"."),""):r},e.prototype.handleStartParsingParameterValue=function(e){if("\""===e.text[e.index]){e.index++;var t=e.text.indexOf("\"",e.index);return t>=e.index?(e.parameterValue=e.text.substring(e.index,t),e.index=t+1,Oe.CompleteParsingParameterValue):(Xe.warn("Encountered unbalanced quotation when parsing \""+e.text.substring(e.index)+"\"."),Oe.StartParsingParameterValue)}var r=e.text.indexOf(";",e.index);return r<0&&(r=e.text.length),e.parameterValue=this.extractUnquotedParameterValue(e,r),e.index=r,Oe.CompleteParsingParameterValue},e.prototype.extractUnquotedParameterValue=function(e,t){var r=e.text.substring(e.index,t).trim();return 0===r.length&&(Xe.warn("Encountered empty parameter value while parsing \""+e.text.substring(e.index)+"\"."),r=""),r},e.prototype.handleCompleteParsingParameterValue=function(e){var t=e.text.indexOf(";",e.index);if(t===e.index)return this.commitNameValuePair(e),e.index++,Oe.ParsingParameterName;if(t<0&&0===e.text.substring(e.index).trim().length)return this.commitNameValuePair(e),e.index=e.text.length,Oe.FinishParsingNoPendingParameter;throw new Error("Expected character: \";\", but encountered: \""+e.text[e.index]+"\", when completing parsing of a parameter value of text \""+e.text+"\".")},e.prototype.handleEndParsing=function(e,t){switch(t){case Oe.CompleteParsingParameterValue:this.commitNameValuePair(e);break;case Oe.StartParsingParameterValue:e.parameterValue="",this.commitNameValuePair(e);break;case Oe.FinishParsingNoPendingParameter:case Oe.ParsingParameterName:break;default:throw new Error("Ended in an invalid state: "+Oe[t]+", when parsing MIME type \""+e.text+"\".")}},e.prototype.commitNameValuePair=function(e){e.mimeTypeObject.parameters[e.parameterName]=e.parameterValue},e}(),Ze=function(){function e(e,t){void 0===e&&(e=Number.MIN_VALUE),void 0===t&&(t=Number.MAX_VALUE),this.minValue=e,this.maxValue=t}return e.prototype.constrain=function(e){return this.minValue>this.maxValue?e:e>this.maxValue?this.maxValue:e<this.minValue?this.minValue:e},e}(),$e=function(){function e(e){this.EXTENSION_REGEX=/(?:\.([^.]+))?$/,this.timeoutMillis=12e4,e&&0<e&&(this.timeoutMillis=e)}return e.prototype.acquire=function(e,t){var r=this.getFileExtension(e);if("js"===r)this.acquireJavaScript(e,t);else{if("css"!==r)throw new Error("Unable to acquire non-JavaScript or CSS resource: "+e);this.acquireCSS(e,t)}},e.prototype.getFileExtension=function(e){var t=this.EXTENSION_REGEX.exec(e);return t?t[1]:""},e.prototype.acquireJavaScript=function(t,r){var n,e=this,i=document.createElement("script"),o=function(e){clearTimeout(n),i&&(delete i.onload,delete i.onerror),"function"==typeof r&&r(e)};n=setTimeout(function(){o(new Error("Timed out acquiring resource after "+e.timeoutMillis+"ms: "+t))},this.timeoutMillis),i.src=t,i.onload=function(){o()},i.onerror=function(e){o(new Error("Error acquiring resource (probably doesn't exist): "+t))},document.getElementsByTagName("head")[0].appendChild(i)},e.prototype.acquireCSS=function(e,t){var r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(r),"function"==typeof t&&t()},e}(),et=a&&a.__extends||(ze=function(e,t){return(ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ze(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),tt=function(t){function e(e){return void 0===e&&(e=window),t.call(this,"undefined"==typeof sessionStorage?null:e.sessionStorage)||this}return et(e,t),e}(Ke),rt=ie.of("Strings"),nt=function(){function e(){}return e.repeat=function(e,t){return t=Math.floor(t),rt(0<=t,"count ["+t+"] >= 0").is.true(),C.isEmpty(e)?"":0===t?"":1===t?e:new Array(t+1).join(e)},e}(),it=function(){function e(e,t){this.maxLength=null!=t?t:e}return e.prototype.constrain=function(e){return e.substring(0,this.maxLength)},e}(),ot=ie.of("ThrottledEventListener"),at=function(){function e(){var e=this;this.attachedListener=null,this.executeThrottledEvent=function(){null!==e.attachedListener&&(e.attachedListener.eventTarget.removeEventListener(e.attachedListener.listenerType,e.executeThrottledEvent),setTimeout(function(){null!==e.attachedListener&&(e.attachedListener.callback(),e.attachedListener.eventTarget.addEventListener(e.attachedListener.listenerType,e.executeThrottledEvent))},e.attachedListener.pollingInterval))}}return e.prototype.attachThrottledListener=function(e,t,r,n){ot(e,"eventTarget").exists(),ot(t,"listenerType").exists(),this.attachedListener={eventTarget:e,listenerType:t,pollingInterval:r,callback:n},e.addEventListener(t,this.executeThrottledEvent)},e.prototype.removeThrottledListener=function(){null!==this.attachedListener&&(this.attachedListener.eventTarget.removeEventListener(this.attachedListener.listenerType,this.executeThrottledEvent),this.attachedListener=null)},e}(),st=!1;try{var ut=new URL("b","http://a");ut.pathname="c%20d",st="http://a/c%20d"===ut.href}catch(e){}if(st)Qe=URL;else{var ct=void 0,lt=/[a-zA-Z]/,pt=/[a-zA-Z0-9\+\-\.]/,ft={ftp:21,file:0,gopher:70,http:80,https:443,ws:80,wss:443},dt={"%2e":".",".%2e":"..","%2e.":"..","%2e%2e":".."};if(Qe=function(){function n(e,t){this._isInvalid=!1,this._isRelative=!1,void 0===t||t instanceof n||(t=new n(String(t))),this._url=e,this.clear();var r=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");this.parse(r,null,t)}return n.prototype.isRelativeScheme=function(e){return void 0!==ft[e]},n.prototype.invalid=function(){this.clear(),this._isInvalid=!0},n.prototype.IDNAToASCII=function(e){return""==e&&this.invalid(),e.toLowerCase()},n.prototype.percentEscape=function(e){var t=e.charCodeAt(0);return 32<t&&t<127&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)},n.prototype.percentEscapeQuery=function(e){var t=e.charCodeAt(0);return 32<t&&t<127&&-1==[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)},n.prototype.parse=function(e,t,r){var n=t||"scheme start",i=0,o="",a=!1,s=!1;e:for(;(e[i-1]!=ct||0==i)&&!this._isInvalid;){var u=e[i];switch(n){case"scheme start":if(!u||!lt.test(u)){if(t)break e;o="",n="no scheme";continue}o+=u.toLowerCase(),n="scheme";break;case"scheme":if(u&&pt.test(u))o+=u.toLowerCase();else{if(':'!=u){if(t){if(ct==u)break e;break e}o='',i=0,n='no scheme';continue}if(this._scheme=o,o='',t)break e;this.isRelativeScheme(this._scheme)&&(this._isRelative=!0),n='file'==this._scheme?'relative':this._isRelative&&r&&r._scheme==this._scheme?'relative or authority':this._isRelative?'authority first slash':'scheme data'}break;case'scheme data':'?'==u?(this._query='?',n='query'):'#'==u?(this._fragment='#',n='fragment'):ct!=u&&'\t'!=u&&'\n'!=u&&'\r'!=u&&(this._schemeData+=this.percentEscape(u));break;case'no scheme':if(r&&this.isRelativeScheme(r._scheme)){n='relative';continue}this.invalid();break;case'relative or authority':if('/'!=u||'/'!=e[i+1]){n='relative';continue}n='authority ignore slashes';break;case'relative':if(this._isRelative=!0,'file'!=this._scheme&&(this._scheme=r._scheme),ct==u){this._host=r._host,this._port=r._port,this._path=r._path.slice(),this._query=r._query,this._username=r._username,this._password=r._password;break e}if('/'==u||'\\'==u)n='relative slash';else if('?'==u)this._host=r._host,this._port=r._port,this._path=r._path.slice(),this._query='?',this._username=r._username,this._password=r._password,n='query';else{if('#'!=u){var c=e[i+1],l=e[i+2];('file'!=this._scheme||!lt.test(u)||':'!=c&&'|'!=c||ct!=l&&'/'!=l&&'\\'!=l&&'?'!=l&&'#'!=l)&&(this._host=r._host,this._port=r._port,this._username=r._username,this._password=r._password,this._path=r._path.slice(),this._path.pop()),n='relative path';continue}this._host=r._host,this._port=r._port,this._path=r._path.slice(),this._query=r._query,this._fragment='#',this._username=r._username,this._password=r._password,n='fragment'}break;case'relative slash':if('/'!=u&&'\\'!=u){'file'!=this._scheme&&(this._host=r._host,this._port=r._port,this._username=r._username,this._password=r._password),n='relative path';continue}n='file'==this._scheme?'file host':'authority ignore slashes';break;case'authority first slash':if('/'!=u){n='authority ignore slashes';continue}n='authority second slash';break;case'authority second slash':if(n='authority ignore slashes','/'!=u)continue;break;case'authority ignore slashes':if('/'!=u&&'\\'!=u){n='authority';continue}break;case'authority':if('@'==u){a&&(o+='%40'),a=!0;for(var p=0;p<o.length;p++){var f=o[p];if('\t'!=f&&'\n'!=f&&'\r'!=f)if(':'!=f||null!==this._password){var d=this.percentEscape(f);null!==this._password?this._password+=d:this._username+=d}else this._password=''}o=''}else{if(ct==u||'/'==u||'\\'==u||'?'==u||'#'==u){i-=o.length,o='',n='host';continue}o+=u}break;case'file host':if(ct==u||'/'==u||'\\'==u||'?'==u||'#'==u){2!=o.length||!lt.test(o[0])||':'!=o[1]&&'|'!=o[1]?(0==o.length||(this._host=this.IDNAToASCII(o),o=''),n='relative path start'):n='relative path';continue}'\t'==u||'\n'==u||'\r'==u||(o+=u);break;case'host':case'hostname':if(':'!=u||s){if(ct==u||'/'==u||'\\'==u||'?'==u||'#'==u){if(this._host=this.IDNAToASCII(o),o='',n='relative path start',t)break e;continue}'\t'!=u&&'\n'!=u&&'\r'!=u&&('['==u?s=!0:']'==u&&(s=!1),o+=u)}else if(this._host=this.IDNAToASCII(o),o='',n='port','hostname'==t)break e;break;case'port':if(/[0-9]/.test(u))o+=u;else{if(ct==u||'/'==u||'\\'==u||'?'==u||'#'==u||t){if(''!=o){var h=parseInt(o,10);h!=ft[this._scheme]&&(this._port=h+''),o=''}if(t)break e;n='relative path start';continue}'\t'==u||'\n'==u||'\r'==u||this.invalid()}break;case'relative path start':if(n='relative path','/'!=u&&'\\'!=u)continue;break;case'relative path':var m;if(ct!=u&&'/'!=u&&'\\'!=u&&(t||'?'!=u&&'#'!=u))'\t'!=u&&'\n'!=u&&'\r'!=u&&(o+=this.percentEscape(u));else(m=dt[o.toLowerCase()])&&(o=m),'..'==o?(this._path.pop(),'/'!=u&&'\\'!=u&&this._path.push('')):'.'==o&&'/'!=u&&'\\'!=u?this._path.push(''):'.'!=o&&('file'==this._scheme&&0==this._path.length&&2==o.length&&lt.test(o[0])&&'|'==o[1]&&(o=o[0]+':'),this._path.push(o)),o='','?'==u?(this._query='?',n='query'):'#'==u&&(this._fragment='#',n='fragment');break;case'query':t||'#'!=u?ct!=u&&'\t'!=u&&'\n'!=u&&'\r'!=u&&(this._query+=this.percentEscapeQuery(u)):(this._fragment='#',n='fragment');break;case'fragment':ct!=u&&'\t'!=u&&'\n'!=u&&'\r'!=u&&(this._fragment+=u)}i++}},n.prototype.clear=function(){this._scheme="",this._schemeData="",this._username="",this._password="",this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1},n.prototype.toString=function(){return this.href},n.prototype.toJSON=function(){return this.href},Object.defineProperty(n.prototype,"href",{get:function(){if(this._isInvalid)return this._url;var e="";return""==this._username&&""==this._password||(e=this._username+(""!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set:function(e){this.clear(),this.parse(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._scheme+":"},set:function(e){this._isInvalid||this.parse(e+":","scheme start")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"host",{get:function(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set:function(e){!this._isInvalid&&this._isRelative&&this.parse(e,"host")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hostname",{get:function(){return this._host},set:function(e){!this._isInvalid&&this._isRelative&&this.parse(e,"hostname")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"port",{get:function(){return this._port},set:function(e){!this._isInvalid&&this._isRelative&&this.parse(e,"port")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pathname",{get:function(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set:function(e){!this._isInvalid&&this._isRelative&&(this._path=[],this.parse(e,"relative path start"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"search",{get:function(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set:function(e){!this._isInvalid&&this._isRelative&&((this._query="?")==e[0]&&(e=e.slice(1)),this.parse(e,"query"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hash",{get:function(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set:function(e){this._isInvalid||((this._fragment="#")==e[0]&&(e=e.slice(1)),this.parse(e,"fragment"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"username",{get:function(){return this._username},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"password",{get:function(){return this._password},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"origin",{get:function(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return(e=this.host)?this._scheme+"://"+e:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"searchParams",{get:function(){return null},enumerable:!0,configurable:!0}),n.createObjectURL=function(e){return""},n.revokeObjectURL=function(e){},n}(),"undefined"!=typeof URL){var ht=URL;ht&&(Qe.createObjectURL=function(e){return ht.createObjectURL.apply(ht,arguments)},Qe.revokeObjectURL=function(e){ht.revokeObjectURL(e)})}}var mt,yt,vt=Qe,gt=function(){function e(){}return e.wwwFormUrlEncode=function(e){return C.pairs(e).map(function(e){return e.map(function(e){return encodeURIComponent(e).replace(/%20/g,"+")}).join("=")}).join("&")},e.appendQueryParams=function(e,t){var r=e.search,n=C.pairs(t).reduce(function(e,t){return e+(""===e?"?":"&")+t[0]+"="+t[1]},r);e.search=n},e.removeQueryParams=function(e,t){var r=e.search;"?"===r[0]&&(r=r.slice(1));for(var n=r.split("&"),i=0;i<n.length;i++){var o=t[n[i].split("=")[0]];null!=o&&(n.splice(i,1),i--)}e.search=n.join("&")},e}(),_t=function(){function e(){}return e.prototype.decode=function(e){for(var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=[],n=0;n<t.length;){var i=0,o=0,a=t[n++];if(240==(248&a))i=3,o=7&a;else if(224==(240&a))i=2,o=15&a;else if(192==(224&a))i=1,o=31&a;else{if(0!=(128&a))throw new TypeError("Failed to decode value: "+a.toString(16));i=0,o=127&a}for(;0<i&&n<t.length;)o<<=6,o|=63&t[n++],i--;if(0<i)throw new TypeError("Failed to decode value");if(65536<=o){var s=56320|1023&(o-=65536),u=55296|o>>10&1023;r.push(String.fromCharCode(u,s))}else r.push(String.fromCharCode(o))}return r.join("")},e}(),bt="undefined"!=typeof TextDecoder?function(){return new TextDecoder("utf-8")}:_t,St={},Et=function(){function e(){}return e.v4=function(){for(var e=St.randomEngine,t=new Uint8Array(16),r=0;r<16;r++)t[r]=256*e.getRandom();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,this.bytesToUuid(t)},e.bytesToUuid=function(e){for(var t=[],r=0;r<256;r++)t[r]=(r+256).toString(16).substr(1);var n=0;return[t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]]].join("")},e}(),wt=function(){function e(){}return e.validate=function(e,t){if(null!=e&&null!=t)for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];e.hasOwnProperty(i)&&null!=e[i]&&("object"==typeof e[i]?this.validate(e[i],t[i]):"string"!=typeof e[i]&&"number"!=typeof e[i]||null==t[i]||(e[i]=t[i].constrain(e[i])))}},e}(),Tt=ie.of("Version"),It="unknown",Ot={AmazonUrlCreator:Pe,CookieStorage:Me,Display:Ce,DOMUtils:ke,EnumUtils:xe,EphemeralJSLogger:Fe,FunctionThrottler:We,HTMLElementUtils:Ve,IPAddress:Be,LocalStorage:Ge,MimeTypeParser:Je,NumberValidator:Ze,ResourceAcquirer:$e,SessionStorage:tt,Strings:nt,StringValidator:it,ThrottledEventListener:at,URL:vt,URLUtils:gt,Utf8TextDecoder:bt,UUIDGenerator:Et,ValidationUtils:wt,Version:function(){function t(e,t){Tt(e,"segments").exists(),Tt(0<e.length,"length > 0").is.true(),Tt(t,"str").exists(),this.segments=e,this.str=t}return t.fromNumber=function(e){return Tt(e,"version").exists(),new t([e],e.toString())},t.fromString=function(e){return Tt(e,"version").exists(),new t(t.split(e),e)},t.createUnknownVersion=function(){return t.fromString(It)},t.prototype.isUnknownVersion=function(){return this.str===It},t.prototype.toString=function(){return this.str},t.prototype.equals=function(e){return 0===this.compareTo(e)},t.prototype.compareTo=function(e){if(this===e)return 0;if(null==e)return 1;if(this.str===It&&e.str===It)return 0;for(var t=Math.min(this.segments.length,e.segments.length),r=0;r<t;r++){if(this.segments[r]<e.segments[r])return-1;if(this.segments[r]>e.segments[r])return 1}return this.isGreaterThanZero(e.segments.slice(this.segments.length))?-1:this.isGreaterThanZero(this.segments.slice(e.segments.length))?1:0},t.prototype.isGreaterThanZero=function(e){for(var t=0;t<e.length;t++)if(C.isString(e[t])&&0<e[t].length||C.isNumber(e[t])&&0<e[t])return!0;return!1},t.split=function(e){var t=e.toLowerCase().match(/\d+|[a-z]+/g);return null!==t?C.map(t,function(e){return/^\d+$/.test(e)?parseInt(e):e}):[]},t}()};(yt=mt||(mt={}))[yt.Unknown=0]="Unknown",yt[yt.AmazonWebView=1]="AmazonWebView",yt[yt.Android=2]="Android",yt[yt.AppleWebKit=3]="AppleWebKit",yt[yt.BlackBerry=4]="BlackBerry",yt[yt.Chrome=5]="Chrome",yt[yt.Chromium=6]="Chromium",yt[yt.Edge=7]="Edge",yt[yt.EdgeNext=8]="EdgeNext",yt[yt.Firefox=9]="Firefox",yt[yt.Firefox64=10]="Firefox64",yt[yt.IE=11]="IE",yt[yt.Opera=12]="Opera",yt[yt.Safari=13]="Safari",yt[yt.SeaMonkey=14]="SeaMonkey",yt[yt.Silk=15]="Silk";var Rt,At,Pt=mt,Lt=Ot.Version,Mt=function(){function a(e,t){this.type=e,this.version=null!=t?t:null}return a.fromUserAgent=function(e){for(var t=0,r=a.REGEXES;t<r.length;t++){var n=r[t],i=n.regex.exec(e);if(i){var o=i[1]?Lt.fromString(i[1]):null;return new a(n.type,o)}}return new a(Pt.Unknown)},a.prototype.getType=function(){return this.type},a.prototype.getVersion=function(){return this.version},a.prototype.toString=function(){var e=Pt[this.type];return null!==this.version&&(e+=" "+this.version),e},a.prototype.equals=function(e){return this.type===e.type&&(null===this.version?null===e.version:this.version.equals(e.version))},a.UNKNOWN=new a(Pt.Unknown),a.REGEXES=[{regex:/(?:Camino|Chimera|hpwOS|webOS|Play[Ss]tation)\//,type:Pt.Unknown},{regex:/Silk\/(\d+[.0-9\-]+)/,type:Pt.Silk},{regex:/(?:BlackBerry|BB10).*Version\/(\d+[.0-9]*)/,type:Pt.BlackBerry},{regex:/(?:OPR\/|Opera |Opera.*Version\/)(\d+[.0-9]*)/,type:Pt.Opera},{regex:/(?:Edg)\/(\d+[.0-9]*)/,type:Pt.EdgeNext},{regex:/(?:Edge)\/(\d+[.0-9]*)/,type:Pt.Edge},{regex:/(?:MSIE |Trident.*rv:)(\d+[.0-9]*)/,type:Pt.IE},{regex:/Chromium\/(\d+[.0-9]*)/,type:Pt.Chromium},{regex:/(?:Chrome|CriOS)\/(\d+[.0-9]*)/,type:Pt.Chrome},{regex:/SeaMonkey\/(\d+[.0-9]*)/,type:Pt.SeaMonkey},{regex:/x64;.*Firefox\/(\d+[.0-9]*)/,type:Pt.Firefox64},{regex:/Firefox\/(\d+[.0-9]*)/,type:Pt.Firefox},{regex:/(?:Amazon.com|Windowshop|Amazon)\/(\d+[.0-9]*)/,type:Pt.AmazonWebView},{regex:/Android[ \-/](\d+[.0-9a-z\-]*)/,type:Pt.Android},{regex:/Version\/(\d+[.0-9]*).*Safari/,type:Pt.Safari},{regex:/AppleWebKit\/(\d+[.0-9]*)/,type:Pt.AppleWebKit}],a}();(At=Rt||(Rt={}))[At.Unknown=0]="Unknown",At[At.Android=1]="Android",At[At.BlackBerry=2]="BlackBerry",At[At.ChromeOS=3]="ChromeOS",At[At.FirefoxOS=4]="FirefoxOS",At[At.GoogleTV=5]="GoogleTV",At[At.iOS=6]="iOS",At[At.Linux=7]="Linux",At[At.Mac=8]="Mac",At[At.MacPPC=9]="MacPPC",At[At.Windows=10]="Windows",At[At.WindowsPhone=11]="WindowsPhone",At[At.WindowsRT=12]="WindowsRT",At[At.XboxOne=13]="XboxOne";var Ct,Dt,kt,Nt,xt=Rt,Ft=a&&a.__extends||(Ct=function(e,t){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Ct(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Wt=Ot.Version;(Nt=kt||(kt={}))[Nt.Windows2000=0]="Windows2000",Nt[Nt.WindowsXP=1]="WindowsXP",Nt[Nt.WindowsVista=2]="WindowsVista",Nt[Nt.Windows7=3]="Windows7",Nt[Nt.Windows8=4]="Windows8",Nt[Nt.Windows8_1=5]="Windows8_1",Nt[Nt.Windows10=6]="Windows10";var Ut,Vt={"5.0":kt.Windows2000,5.1:kt.WindowsXP,5.2:kt.WindowsXP,"6.0":kt.WindowsVista,6.1:kt.Windows7,6.2:kt.Windows8,6.3:kt.Windows8_1,6.4:kt.Windows10,"10.0":kt.Windows10,10.1:kt.Windows10,10.2:kt.Windows10},jt=((Dt={})[kt.Windows2000]="2000",Dt[kt.WindowsXP]="XP",Dt[kt.WindowsVista]="Vista",Dt[kt.Windows7]="7",Dt[kt.Windows8]="8",Dt[kt.Windows8_1]="8.1",Dt[kt.Windows10]="10",Dt),Ht=function(t){function r(e){return t.call(this,[e],jt[e])||this}return Ft(r,t),r.fromKernelVersion=function(e){var t=Vt[e];if(null==t)throw new Error("Unexpected Windows kernel version: "+e);return new r(t)},r.WINDOWS_2000=new r(kt.Windows2000),r.WINDOWS_XP=new r(kt.WindowsXP),r.WINDOWS_VISTA=new r(kt.WindowsVista),r.WINDOWS_7=new r(kt.Windows7),r.WINDOWS_8=new r(kt.Windows8),r.WINDOWS_8_1=new r(kt.Windows8_1),r.WINDOWS_10=new r(kt.Windows10),r}(Wt),Bt=Ot.Version,qt=((Ut={})[xt.Unknown]="Unknown",Ut[xt.Android]="Android",Ut[xt.BlackBerry]="BlackBerry",Ut[xt.ChromeOS]="Chrome OS",Ut[xt.FirefoxOS]="Firefox OS",Ut[xt.GoogleTV]="Google TV",Ut[xt.iOS]="iOS",Ut[xt.Linux]="Linux",Ut[xt.Mac]="Mac OS X",Ut[xt.MacPPC]="Mac OS PPC",Ut[xt.Windows]="Windows",Ut[xt.WindowsPhone]="Windows Phone",Ut[xt.WindowsRT]="Windows RT",Ut[xt.XboxOne]="Xbox One",Ut),Kt=function(){function o(e,t,r){this.family=e,this.version=null!=t?t:Bt.createUnknownVersion(),this.kernelVersion=null!=r?r:this.version}return o.fromUserAgent=function(e){for(var t=0,r=o.REGEXES;t<r.length;t++){var n=r[t],i=n.regex.exec(e);if(i)return n.handler(i)}return new o(xt.Unknown)},o.prototype.getFamily=function(){return this.family},o.prototype.getFamilyName=function(){return qt[this.family]||null},o.prototype.getVersion=function(){return this.version},o.prototype.getKernelVersion=function(){return this.kernelVersion},o.prototype.toString=function(){var e=qt[this.family];return null===this.version||this.version.isUnknownVersion()||(e+=" "+this.version),e},o.prototype.equals=function(e){return this.family===e.family&&(null===this.version?null===e.version:this.version.equals(e.version))},o.UNKNOWN=new o(xt.Unknown),o.MAC_OS_X_YOSEMITE=new o(xt.Mac,Bt.fromString("10.10")),o.WINDOWS_2000=new o(xt.Windows,Ht.WINDOWS_2000),o.WINDOWS_XP=new o(xt.Windows,Ht.WINDOWS_XP),o.WINDOWS_VISTA=new o(xt.Windows,Ht.WINDOWS_VISTA),o.WINDOWS_7=new o(xt.Windows,Ht.WINDOWS_7),o.WINDOWS_8=new o(xt.Windows,Ht.WINDOWS_8),o.WINDOWS_8_1=new o(xt.Windows,Ht.WINDOWS_8_1),o.WINDOWS_10=new o(xt.Windows,Ht.WINDOWS_10),o.REGEXES=[{regex:/Windows ?Mobile|Xbox(?!.*One)|Play[Ss]tation/,handler:function(){return new o(xt.Unknown)}},{regex:/Windows Phone(?: (?:OS[ /])?(\d+[.0-9]*))?/,handler:function(e){var t=e[1]?Bt.fromString(e[1]):null;return new o(xt.WindowsPhone,t)}},{regex:/Xbox One(?: (?:OS[ /])?(\d+[.0-9]*))?/,handler:function(e){var t=e[1]?Bt.fromString(e[1]):null;return new o(xt.XboxOne,t)}},{regex:/(?:BB10|BlackBerry)(?:.*Version\/(\d+[.0-9]*))?/,handler:function(e){var t=e[1]?Bt.fromString(e[1]):null;return new o(xt.BlackBerry,t)}},{regex:/GoogleTV(?:[ /]([0-9a-b]+[.0-9]*))?/,handler:function(e){var t=e[1]?Bt.fromString(e[1]):null;return new o(xt.GoogleTV,t)}},{regex:/Android(?:[ \-/](\d+[.0-9a-z\-]*))?|\bSilk\b/,handler:function(e){var t=e[1]?Bt.fromString(e[1]):null;return new o(xt.Android,t)}},{regex:/CrOS(?: i686 (\d+[.0-9]*))?/,handler:function(e){var t=e[1]?Bt.fromString(e[1]):null;return new o(xt.ChromeOS,t)}},{regex:/(?:iPad|iPhone|iPod)(?:.*OS (\d+[_.0-9]*))?/,handler:function(e){var t=e[1]?Bt.fromString(e[1].replace(/_/g,".")):null;return new o(xt.iOS,t)}},{regex:/Intel Mac OS X(?: (\d+[_.0-9]*))?/,handler:function(e){var t=e[1]?Bt.fromString(e[1].replace(/_/g,".")):null;return new o(xt.Mac,t)}},{regex:/PPC Mac OS(?: X)?(?: (\d+[_.0-9]*))?/,handler:function(e){var t=e[1]?Bt.fromString(e[1].replace(/_/g,".")):null;return new o(xt.MacPPC,t)}},{regex:/Windows NT(?: (5\.[012]|6\.[01234]))?.*ARM/,handler:function(e){var t=e[1],r=t?Ht.fromKernelVersion(t):null,n=t?Bt.fromString(t):null;return new o(xt.WindowsRT,r,n)}},{regex:/Windows NT(?: (5\.[012]|6\.[01234]|10\.[012]))?/,handler:function(e){var t=e[1],r=t?Ht.fromKernelVersion(t):null,n=t?Bt.fromString(t):null;return new o(xt.Windows,r,n)}},{regex:/Linux/,handler:function(){return new o(xt.Linux)}},{regex:/Mozilla\/5.0 \((?:Mobile|Tablet); (?:[0-9A-Za-z .\-]+; )?rv:\d+[.0-9]*\) Gecko\/\d+[.0-9]* Firefox\/\d+[.0-9]*/,handler:function(){return new o(xt.FirefoxOS)}}],o}(),Yt={Browser:Mt,BrowserType:Pt,OperatingSystem:Kt,OperatingSystemFamily:xt,WindowsVersion:Ht,getBrowser:function(e){return void 0===e&&(e=navigator.userAgent),Mt.fromUserAgent(e)},getOperatingSystem:function(e){return void 0===e&&(e=navigator.userAgent),Kt.fromUserAgent(e)}},Gt=t(function(e,t){var r,n,i,o,a,s,u,c,l,p,f;Object.defineProperty(t,"__esModule",{value:!0});var d="2c3c3654-ac62-46a9-a36e-76e1ff64a679",h=((r={})[Yt.BrowserType.AmazonWebView]={},r[Yt.BrowserType.Android]={},r[Yt.BrowserType.Chrome]=((n={})["DRM:YES"]=[{browserRange:{min:Ot.Version.fromNumber(69)},osFamily:Yt.OperatingSystemFamily.Windows,osVersion:{min:Yt.WindowsVersion.WINDOWS_7}},{browserRange:{min:Ot.Version.fromNumber(69)},osFamily:Yt.OperatingSystemFamily.Android,osVersion:{min:Ot.Version.fromString("4.4.3")}}],n[d+"|DRM:NO"]=[{browserRange:{min:Ot.Version.fromNumber(42)}}],n),r[Yt.BrowserType.Chromium]=((i={})["DRM:YES"]=[{browserRange:{min:Ot.Version.fromNumber(69)},osFamily:Yt.OperatingSystemFamily.Windows,osVersion:{min:Yt.WindowsVersion.WINDOWS_7}},{browserRange:{min:Ot.Version.fromNumber(69)},osFamily:Yt.OperatingSystemFamily.Android,osVersion:{min:Ot.Version.fromString("4.4.3")}}],i[d+"|DRM:NO"]=[{browserRange:{min:Ot.Version.fromNumber(42)}}],i),r[Yt.BrowserType.Edge]=((o={})["DRM:YES"]=[{browserRange:{min:Ot.Version.fromNumber(15)}}],o["DRM:NO"]=[{browserRange:{min:Ot.Version.fromNumber(15)}}],o),r[Yt.BrowserType.EdgeNext]=((a={})["DRM:YES"]=[{browserRange:{min:Ot.Version.fromNumber(64)}}],a["DRM:NO"]=[{browserRange:{min:Ot.Version.fromNumber(64)}}],a),r[Yt.BrowserType.Firefox]=((s={})["DRM:YES"]=[{browserRange:{min:Ot.Version.fromNumber(60)},osFamily:Yt.OperatingSystemFamily.Windows,osVersion:{min:Yt.WindowsVersion.WINDOWS_7}},{browserRange:{min:Ot.Version.fromNumber(60)},osFamily:Yt.OperatingSystemFamily.Android,osVersion:{min:Ot.Version.fromString("4.4.3")}}],s[d+"|DRM:NO"]=[{browserRange:{min:Ot.Version.fromNumber(53)},osFamily:Yt.OperatingSystemFamily.Android,osVersion:{min:Ot.Version.fromString("4.4.3")}},{browserRange:{min:Ot.Version.fromNumber(42)}}],s),r[Yt.BrowserType.Firefox64]=((u={})["DRM:YES"]=[{browserRange:{min:Ot.Version.fromNumber(60)},osFamily:Yt.OperatingSystemFamily.Windows,osVersion:{min:Yt.WindowsVersion.WINDOWS_7}},{browserRange:{min:Ot.Version.fromNumber(60)},osFamily:Yt.OperatingSystemFamily.Android,osVersion:{min:Ot.Version.fromString("4.4.3")}}],u[d+"|DRM:NO"]=[{browserRange:{min:Ot.Version.fromNumber(53)},osFamily:Yt.OperatingSystemFamily.Android,osVersion:{min:Ot.Version.fromString("4.4.3")}},{browserRange:{min:Ot.Version.fromNumber(42)}}],u),r[Yt.BrowserType.Opera]=((c={})["DRM:YES"]=[{browserRange:{min:Ot.Version.fromNumber(37)},osFamily:Yt.OperatingSystemFamily.Windows,osVersion:{min:Yt.WindowsVersion.WINDOWS_7}},{browserRange:{min:Ot.Version.fromNumber(37)},osFamily:Yt.OperatingSystemFamily.Android,osVersion:{min:Ot.Version.fromString("4.4.3")}}],c[d+"|DRM:NO"]=[{browserRange:{min:Ot.Version.fromNumber(32)}}],c),r[Yt.BrowserType.IE]=((l={})["DRM:YES"]=[{browserRange:{min:Ot.Version.fromNumber(11)}}],l),r[Yt.BrowserType.Safari]=((p={})["DRM:YES"]=[{browserRange:{min:Ot.Version.fromNumber(10)},osFamily:Yt.OperatingSystemFamily.Mac,osVersion:{min:Ot.Version.fromString("10.12.1")}}],p["DRM:NO"]=[{browserRange:{min:Ot.Version.fromNumber(8)}}],p),r[Yt.BrowserType.Silk]=((f={})["DRM:YES"]=[{browserRange:!1}],f),r);t.DefaultBrowserDenylist=h});e(Gt);Gt.DefaultBrowserDenylist;var Xt=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="cenc",n=function(){function e(){}return e.prototype.getDrmSystems=function(){return[{keySystem:"com.microsoft.playready",configurations:[[{initDataTypes:[r],audioCapabilities:[{contentType:"audio/mp4; codecs=\"mp4a.40.2\""}],videoCapabilities:[{contentType:"video/mp4; codecs=\"avc1.4D401E\"",robustness:"HW_SECURE_DECODE"},{contentType:"video/mp4; codecs=\"avc1.4D401E\"",robustness:"SW_SECURE_DECODE"}]}]]},{keySystem:"com.widevine.alpha",configurations:[[{initDataTypes:[r],videoCapabilities:[{contentType:"video/mp4; codecs=\"avc1.4D401E\"",robustness:"HW_SECURE_DECODE"},{contentType:"video/mp4; codecs=\"avc1.4D401E\"",robustness:"SW_SECURE_DECODE"}]}],[{initDataTypes:[r],videoCapabilities:[{contentType:"video/mp4; codecs=\"avc1.640028\""}]}],[{initDataTypes:[r]}]]}]},e}();t.EmeDrmFactory=n});e(Xt);Xt.EmeDrmFactory;var zt=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a=c.get("PlayerSDKDeviceDenylist"),s="video/mp4; codecs=\"avc1.640028\"",u="audio/mp4; codecs=\"mp4a.40.2\"",r="com.microsoft.playready",n=function(){function e(e){this.navigator=navigator,this.weblabs=e,this.browser=Yt.getBrowser(),this.browserType=this.browser.getType(),this.os=Yt.getOperatingSystem()}return e.prototype.getBasicPlayerCapabilities=function(e){if(null==Gt.DefaultBrowserDenylist[this.browserType])return V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.UNSUPPORTED_BROWSER});var t=this.getDenylistEntry(e);if(null!=t){if(this.isDenylistedOs(t))return V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.UNSUPPORTED_OS});if(this.isDenylistedBrowser(t))return V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.BROWSER_OUT_OF_DATE})}return this.checkBasicMediaCapabilities(e)},e.prototype.isInRange=function(e,t){return null!=t.min&&0<t.min.compareTo(e)||null!=t.max&&t.max.compareTo(e)<0},e.prototype.isDenylistedOs=function(e){return null!=e.osFamily&&(!1===e.osVersion||this.isInRange(this.os.getVersion(),e.osVersion))},e.prototype.isDenylistedBrowser=function(e){return!1===e.browserRange||this.isInRange(this.browser.getVersion(),e.browserRange)},e.prototype.keyString=function(e){return"DRM:"+(e.requiresDrm?"YES":"NO")},e.prototype.getFirst=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,i=t;n<i.length;n++){var o=i[n];if(null!=e[o])return e[o]}return null},e.prototype.getDenylistEntry=function(e){var t=this,r=Gt.DefaultBrowserDenylist[this.browserType];if(null==r)return null;var n=this.getFirst(r,this.keyString({requiresDrm:e}),this.keyString({requiresDrm:!0}));if(null==n)return null;var i=C.max(n,function(e){return e.osFamily===t.os.getFamily()?2:null==e.osFamily?1:-1/0});return C.isObject(i)?i:null},e.prototype.checkBasicMediaCapabilities=function(e){return null==window.MediaSource&&this.os.getFamily()===Yt.OperatingSystemFamily.iOS&&!e&&this.isHLSCapable()?(a.info("HLS non-DRM support detected."),V.Promise.resolve({supportsPlayback:!0,supportsDrm:!1})):null==window.MediaSource?V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.MISSING_MEDIASOURCE}):e?this.isSupportedWebkitBrowser(this.browserType)?this.getWebkitCapabilities():this.browserType===Yt.BrowserType.IE&&this.weblabs[w.Weblabs.HASTUR_IE]!==w.WeblabTreatment.T1?V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.UNSUPPORTED_BROWSER}):this.browserType===Yt.BrowserType.Edge||this.browserType===Yt.BrowserType.IE?this.getMicrosoftCapabilities():this.browserType===Yt.BrowserType.Safari?this.getSafariCapabilities():this.browserType===Yt.BrowserType.Firefox||this.browserType===Yt.BrowserType.Firefox64?this.getFirefoxCapabilities():V.Promise.resolve({supportsPlayback:!0,supportsDrm:!0,unsupportedReason:null}):this.getUnencryptedCapabilities()},e.prototype.getUnencryptedCapabilities=function(){a.info("No DRM required, not checking DRM support.");var e=MediaSource.isTypeSupported(s),t=MediaSource.isTypeSupported(u);a.info("\""+s+"\" supported: "+e),a.info("\""+u+"\" supported: "+t);var r=t&&e;return V.Promise.resolve({supportsPlayback:r,supportsDrm:!0,unsupportedReason:r?null:be.UnsupportedReason.MISSING_CODEC})},e.prototype.getWebkitCapabilities=function(){var n=this;return null==this.navigator.requestMediaKeySystemAccess?(a.info("Webkit browser not supported because DRM is required."),V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.UNSUPPORTED_BROWSER})):(a.info("navigator.requestMediaKeySystemAccess support detected."),new V.Promise(function(r){n.supportsUnprefixedEme(function(e){var t=null;e||(t=n.browserType===Yt.BrowserType.EdgeNext?be.UnsupportedReason.MISSING_PLAYREADY_CDM:be.UnsupportedReason.MISSING_WIDEVINE_CDM),r({supportsPlayback:e,supportsDrm:e,unsupportedReason:t})})}))},e.prototype.getMicrosoftCapabilities=function(){if(null==window.MSMediaKeys)return V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.MISSING_PLAYREADY_CDM});try{return window.MSMediaKeys.isTypeSupported(r,s)&&window.MSMediaKeys.isTypeSupported(r,u)?(a.info("PlayReady support detected."),V.Promise.resolve({supportsPlayback:!0,supportsDrm:!0})):(a.info("Audio/Video types not supported by MSMediaKeys"),V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.MISSING_CODEC_IN_PLAYREADY_CDM}))}catch(e){return a.error("An error occurred when checking MSMediaKeys",e),V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.MISSING_PLAYREADY_CDM})}},e.prototype.getSafariCapabilities=function(){return this.weblabs[w.Weblabs.HASTUR_SAFARI]!==w.WeblabTreatment.T1?V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.UNSUPPORTED_BROWSER}):this.isFairplaySupported()?(a.info("Safari MP2T+MSE support detected."),V.Promise.resolve({supportsPlayback:!0,supportsDrm:!0})):(a.info("Detected Safari version "+this.browser.getVersion().toString()+" on MacOS version "+this.os.getVersion().toString()+", but WebKitMediaKeys.canPlayType returned false"),V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.MISSING_FAIRPLAY_CDM}))},e.prototype.getFirefoxCapabilities=function(){var e=this;return null==this.navigator.requestMediaKeySystemAccess?(a.info("Firefox not supported because DRM is required."),V.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:be.UnsupportedReason.UNSUPPORTED_BROWSER})):(a.info("navigator.requestMediaKeySystemAccess support detected."),new V.Promise(function(t){e.supportsUnprefixedEme(function(e){t({supportsDrm:e,supportsPlayback:e,unsupportedReason:e?null:be.UnsupportedReason.MISSING_WIDEVINE_CDM})})}))},e.prototype.isHLSCapable=function(){var e=document.createElement("video");return null!=e.canPlayType&&""!==e.canPlayType("application/vnd.apple.mpegURL")},e.prototype.isSupportedWebkitBrowser=function(e){var t=this.weblabs[w.Weblabs.HTML5_ENABLE_CHROMIUM]===w.WeblabTreatment.T1;return e===Yt.BrowserType.EdgeNext||e===Yt.BrowserType.Chrome||e===Yt.BrowserType.Silk||e===Yt.BrowserType.Opera||e===Yt.BrowserType.AmazonWebView||e===Yt.BrowserType.Chromium&&t},e.prototype.supportsUnprefixedEme=function(i){var o=this,e=(new Xt.EmeDrmFactory).getDrmSystems();e.reduce(function(e,n){return n.configurations.reduce(function(e,r){return e.catch(function(){return e=n,t=r,o.navigator.requestMediaKeySystemAccess(e.keySystem,t).then(function(){a.info(e.keySystem+", cenc, \""+s+"\", and \""+u+"\" support detected."),i(!0)});var e,t})},e)},V.Promise.reject("InitialValue is expected to fail")).catch(function(){a.info("No supported keySystem, cenc, \""+s+"\", and/or \""+u+"\" support detected."),i(!1)})},e.prototype.isFairplaySupported=function(){return void 0!==window.WebKitMediaKeys&&window.WebKitMediaKeys.isTypeSupported("com.apple.fps.2_0","video/mp2t")},e}();t.PlayerSDKDeviceDenylist=n});e(zt);zt.PlayerSDKDeviceDenylist;var Qt=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=c),this.version="1.0.0",this.Features=w.WebPlayerSDKFeatures,this.authContext=null,this.webPlayerSDK=null,this.sdkAcquisition=null,!(this.cancelSdkAcquisition=null)===e.debug&&t.useDefaults(),this.eventEmitter=new K.EventEmitter;var r=null==e.weblabs?{}:e.weblabs;this.playerSDKDeviceDenylist=new zt.PlayerSDKDeviceDenylist(r),this.playerSDKConfig=e,this.playerSDKConfig.marketplaceId=null==this.playerSDKConfig.marketplaceId?ne.MarketplaceID.US:this.playerSDKConfig.marketplaceId,this.bundleAcquirer=new Te.BundleAcquirer(this.playerSDKConfig)}return e.prototype.destroy=function(){null!=this.webPlayerSDK&&(this.webPlayerSDK.destroy(),this.webPlayerSDK=null),null!=this.cancelSdkAcquisition&&(this.cancelSdkAcquisition(),this.cancelSdkAcquisition=null,this.sdkAcquisition=null)},e.prototype.getFeature=function(e,t){var r=this;if(null!=this.webPlayerSDK)return this.getFeatureFromSDK(e,t);if(null==this.sdkAcquisition){var n=V.CancelToken.source(),i=n.token,o=n.cancel;this.cancelSdkAcquisition=o,this.sdkAcquisition=this.bundleAcquirer.acquireSDK().then(function(e){if(i.requested)throw Se.LoaderErrorCreator.createLoaderError();if(null==e)throw Se.LoaderErrorCreator.createLoaderError();r.webPlayerSDK=new e(r.playerSDKConfig),null!=r.authContext&&r.webPlayerSDK.setAuthContext(r.authContext)}).catch(function(e){return r.eventEmitter.emit("LoadError",e),V.Promise.reject(e)})}return this.sdkAcquisition.then(function(){return r.getFeatureFromSDK(e,t)})},e.prototype.setAuthContext=function(e){null!=this.webPlayerSDK?this.webPlayerSDK.setAuthContext(e):this.authContext=e},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.once=function(e,t){this.eventEmitter.once(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.isPlayerFeature=function(e){return e===w.WebPlayerSDKFeatures.AmazonVideoPlayer||e===w.WebPlayerSDKFeatures.ChromelessPlayer||e===w.WebPlayerSDKFeatures.GCastPlayer||e===w.WebPlayerSDKFeatures.Player},e.prototype.getFeatureFromSDK=function(t,r){var n=this;if(null==this.webPlayerSDK)return V.Promise.reject(Se.LoaderErrorCreator.createLoaderError());if(!this.isPlayerFeature(t))return this.webPlayerSDK.getFeature(t,r);var e=r,i=!1;return null!=e&&null!=e.requiredCapabilities&&null!=e.requiredCapabilities.supportsDrm&&(i=e.requiredCapabilities.supportsDrm),this.playerSDKDeviceDenylist.getBasicPlayerCapabilities(i).then(function(e){return e.supportsPlayback?n.webPlayerSDK.getFeature(t,r):V.Promise.reject(Se.LoaderErrorCreator.createLoaderError(e.unsupportedReason,i))})},e}();t.WebPlayerSDKLoader=r});e(Qt);Qt.WebPlayerSDKLoader;return window.WebPlayerSDK=Qt.WebPlayerSDKLoader}();