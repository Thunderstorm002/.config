function xmlToSrt(e,r){e=e.replace(/<tt:br\/>/gi,"\n");try{var t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){return console.error(e),alert("Failed to parse XML subtitle file"),null}var l=t.querySelectorAll("body p"),n=[];for(let e=0,t=l.length;e<t;++e){let t=l[e].innerHTML.trim();""!==t&&(r.startsWith("ar")&&(t=t.replace(/^(?!\u202B|\u200F)/gm,"â€«")),n.push(e+1),n.push(l[e].getAttribute("begin").replace(".",",")+" --\x3e "+l[e].getAttribute("end").replace(".",",")),n.push(t),n.push(""))}return n.join("\n")}