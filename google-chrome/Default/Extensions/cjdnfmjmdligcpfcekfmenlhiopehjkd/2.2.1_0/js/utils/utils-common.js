var TAG="Twoseven-Extension";function httpsUrl(e){return e.includes("http://")&&(e=e.replace("http://","https://")),e}function parseVideoURL(e){const t={};return e.startsWith("hls:")||e.startsWith("url:")||e.startsWith("mpd:")?(t.protocol=e.substr(0,3),t.url=e.substr(4)):(t.protocol="url",t.url=e),t}function sanitizeObject(e,t=!1){if(e)return t?void twosevenExtLog(TAG,"sanitizeObject with functions unimplemented"):JSON.parse(JSON.stringify(e))}function isOnTwoSeven(e){const t=new URI(e).hostname();return"twoseven.xyz"===t||"video.twoseven.xyz"===t||"predeploy.twoseven.xyz"===t}window.twosevenGET=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200===n.status?t(null,n.responseText):t("something else other than 200 was returned",""))},n.open("GET",e,!0),n.send()},window.triggerEvent=function(e,t,n){var o=new CustomEvent(t,{detail:{data:n}});e.dispatchEvent(o)},window.twoseven.templateReplace=((e,t)=>(Object.keys(t).forEach(function(n){e=e.replace(new RegExp(`{{${n}}}`),t[n])}),e)),window.twoseven.triggerMouseEvent=((e,t,n)=>{("string"==typeof t||t instanceof String)&&(t=document.querySelector(t));const o=t.getBoundingClientRect(),s=o.top+o.height/2,r=o.left+o.width/2;var i=new MouseEvent(e,{view:window,bubbles:!0,cancelable:!0,screenX:r,screenY:s,detail:{data:n}});t.dispatchEvent(i)}),window.twoseven.convertToVideoTime=(e=>{const t=new Date(null);return t.setSeconds(e/1e3),t.toISOString().substr(11,8)}),window.twoseven.testForEvent=((e,t,n)=>new Promise((o,s)=>{const r=setTimeout(()=>s(new Error("Timed out")),n);e.addEventListener(t,function n(s){e.removeEventListener(t,n),clearTimeout(r),o(s)})}));