function initializeDRMHandler(e,t,a={}){window.addEventListener("message",async n=>{const{data:r={}}=n;if(!r.action)return;const{ack:i,action:c,drmIgnore:s=!1}=r;if(s)return;let o,u=t;switch(c){case"register-iframe":case"url-changed":break;case"fullscreen-changed":a[c]&&a[c](n);break;default:if(c.startsWith("ack-"))return;try{"function"==typeof t&&(u=await t()),o=await u[c](r)}catch(n){return}}if(i){const{event:t}=i;postToParent({action:t,name:e,result:o,json:{result:o}})}})}