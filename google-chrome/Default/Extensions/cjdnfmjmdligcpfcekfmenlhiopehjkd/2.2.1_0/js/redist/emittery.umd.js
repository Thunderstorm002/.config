window.Emittery=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";const r=new WeakMap,o=new WeakMap,i=Promise.resolve();function s(e){if("string"!=typeof e)throw new TypeError("eventName must be a string")}function a(e){if("function"!=typeof e)throw new TypeError("listener must be a function")}function u(e,t){const n=o.get(e);return n.has(t)||n.set(t,new Set),n.get(t)}class f{constructor(){r.set(this,new Set),o.set(this,new Map)}on(e,t){return s(e),a(t),u(this,e).add(t),this.off.bind(this,e,t)}off(e,t){s(e),a(t),u(this,e).delete(t)}once(e){return new Promise(t=>{s(e);const n=this.on(e,e=>{n(),t(e)})})}async emit(e,t){s(e);const n=u(this,e),o=r.get(this),a=[...n],f=[...o];return await i,Promise.all([...a.map(async e=>{if(n.has(e))return e(t)}),...f.map(async n=>{if(o.has(n))return n(e,t)})])}async emitSerial(e,t){s(e);const n=u(this,e),o=r.get(this),a=[...n],f=[...o];await i;for(const e of a)n.has(e)&&await e(t);for(const n of f)o.has(n)&&await n(e,t)}onAny(e){return a(e),r.get(this).add(e),this.offAny.bind(this,e)}offAny(e){a(e),r.get(this).delete(e)}clearListeners(e){if("string"==typeof e)u(this,e).clear();else{r.get(this).clear();for(const e of o.get(this).values())e.clear()}}listenerCount(e){if("string"==typeof e)return r.get(this).size+u(this,e).size;void 0!==e&&s(e);let t=r.get(this).size;for(const e of o.get(this).values())t+=e.size;return t}}f.Typed=class extends f{},Object.defineProperty(f.Typed,"Typed",{enumerable:!1,value:void 0}),e.exports=f}]);