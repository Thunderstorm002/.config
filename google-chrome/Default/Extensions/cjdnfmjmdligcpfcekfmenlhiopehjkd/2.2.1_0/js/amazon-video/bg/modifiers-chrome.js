browser.webRequest.onBeforeRequest.addListener(e=>{if(0===e.frameId||!twosevenTabs[e.tabId]){if(e.url.includes("ts-uuid"))return;const r=new URI(e.url);return r.addQuery({"ts-uuid":uuid()}),{redirectUrl:r.toString()}}return e.url.includes("ATVWebPlayerSDK.js")?{redirectUrl:browser.extension.getURL("/web_resources/js/amazon/ATVWebPlayerSDK.js")}:e.url.includes("WebPlayerSDK.js")?{redirectUrl:browser.extension.getURL("/web_resources/js/amazon/WebPlayerSDK.js")}:void 0},{urls:[ATVWebPlayerURLWebRequestPattern,WebPlayerSDKWebRequestPattern,ATVWebPlayerSDKWebRequestPattern]},["blocking"]);