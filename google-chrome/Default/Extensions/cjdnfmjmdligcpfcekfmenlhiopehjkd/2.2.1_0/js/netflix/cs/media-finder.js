!function(){if(window.top!==window)return;const e=browser.runtime.connect({name:"netflix-media-finder"});var t;e.onMessage.addListener(e=>{switch(e.action){case"triggered-watch-pause":{const e=history.state||{},{index:t=0,url:n=window.location.pathname}=e,i=n.replace("watch","title");window.history.pushState({index:t+1,url:i},"",i),window.history.pushState({index:t+1,url:i},"",i),window.history.go(-1);break}}}),setInterval(async()=>{const n=getPlayPauseButton();if(!n||t===n)return;t=n;const i=new URI(window.location.href);i.removeQuery(i.query(!0));const o=i.toString(),a=await getMetadata(o);e.postMessage({action:"found-media",data:{from:"netflix/cs/media-finder.js",videoSelector:"netflix",videoURL:o,videoData:a,referer:o,origin:o,strategies:null,headers:[]}})},300)}();