!function(){var e=isOnTwoSeven(window.location.href);const n=browser.extension.getURL("web_resources/modal/index.html");try{e=isOnTwoSeven(window.top.location.href)}catch(e){}!function(){injectStylesheetByURL(browser.extension.getURL("web_resources/modal/modal.css"));const e=document.createElement("div");e.innerHTML='\n    <div id="twoseven-ext-tab-media-modal" class="twoseven-ext-tab-media-modal" style="display: none;">\n      \x3c!-- Modal content --\x3e\n      <div class="twoseven-ext-tab-media-modal-content">\n        <div class="iframe-container" style="height: 100%; width: 100%;">\n          <span class="close">&times;</span>\n        </div>\n      </div>\n    </div>',document.body.appendChild(e),injectScript("\n      const modal = document.querySelector('.twoseven-ext-tab-media-modal')\n      const modalCloseBtn = modal.querySelector('.close')\n      function closeModal () {\n        modal.style.display = 'none'\n        const frame = document.querySelector('#twoseven-ext-tab-media-iframe').contentWindow\n        frame.postMessage({\n          __evt_name: 'modal-hide'\n        }, '*')\n      }\n      modalCloseBtn.onclick = closeModal\n\n      window.onmessage = function (e) {\n        if (e.data.__evt_name === 'modal-hide') {\n          closeModal()\n        }\n      }\n\n      window.twoseven.closeTabMediaModal = closeModal\n\n      window.onclick = function (e) {\n        if (e.target.id === 'twoseven-ext-tab-media-modal' && modal.style.display === 'block') {\n            closeModal()\n        }\n      }\n    ")}(),document.defaultView.addEventListener("message",({data:o})=>{if(!o||!o.action||"twoseven-ext-initialize-modal"!==o.action)return;!function(o={},t={}){let a=document.querySelector("#twoseven-ext-tab-media-iframe");if(!a){(a=document.createElement("iframe")).id="twoseven-ext-tab-media-iframe",a.src=`${n}?isOnTwoSeven=${e}`;const o=document.querySelector("#twoseven-ext-tab-media-modal .iframe-container");o.appendChild(a)}const i=a.contentWindow,d={__evt_name:"media-update",media:o,location:t};i.postMessage({__evt_name:"modal-open"},"*"),i.postMessage(d,"*")}(o.data,JSON.parse(JSON.stringify(window.location)))})}();