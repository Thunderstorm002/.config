(async()=>{if(window.top===window)return;if(!await window.twoseven.isOnTwoSevenTab())return;if(["https://(.*\\.)?twoseven\\.xyz/.*"].some(e=>new RegExp(e).test(window.location.href)))return;const e=Cookies.withConverter({write:e=>e,read:e=>e}),t=browser.runtime.connect({name:"samesite-cookies"});t.onMessage.addListener(t=>{if("samesite-cookies"!==t.action)return;const{cookies:o}=t;if(!o)return;const n=new URI(window.location.href).host(),s=[];for(const e of Object.values(o)){const{name:t,value:o,...i}=e;i.expires=new Date(1e3*i.expirationDate);const{expires:a,path:r,domain:c}=i;let{sameSite:w="none"}=i;"no_restriction"!==w&&"unspecified"!==w||(w="none");let m=c;c.startsWith(".")&&(m=c.substring(1)),n.includes(m)&&s.push({name:t,value:o,expires:a,sameSite:w,secure:!0,path:r,domain:c})}for(const t of s){let{name:o,value:n,expires:s,sameSite:i,secure:a,path:r,domain:c}=t;try{o=decodeURIComponent(o)}catch(e){}e.get(o)!==n&&(e.remove(o),e.set(o,n,{expires:s,sameSite:i,secure:a,path:r,domain:c}))}}),t.postMessage({action:"samesite-cookies",url:window.location.href})})();