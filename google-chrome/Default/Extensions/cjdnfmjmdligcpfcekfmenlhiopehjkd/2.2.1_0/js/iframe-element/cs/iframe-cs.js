!async function(){if(window.parent===window)return;var n,e;browser.runtime.connect({name:name}).onMessage.addListener(n=>{if(n&&n.action)switch(n.action){case"room-updated":postTo(window,{action:"room-updated",data:sanitizeObject(n.data)})}});const o=new ProxyObject({roomOwner:void 0,roomType:void 0,roomController:void 0,roomProperties:void 0},`${name}-newRoomInfo`);window.twoseven.roomInfo=o,window.addEventListener("message",({data:n={}})=>{const{action:e}=n;if("room-updated"!==e)return;const{key:t,value:a}=n;o[t]=a}),injectScript("\n    const roomInfo = {\n      roomOwner: undefined,\n      roomType: undefined,\n      roomController: undefined,\n      roomProperties: undefined\n    }\n    window.twoseven.roomInfo = roomInfo\n\n    window.addEventListener('message', ({ data = {} }) => {\n      const { action } = data\n      if (action !== 'room-updated') {\n        return\n      }\n      const { data: { key, value } } = data\n      roomInfo[key] = value\n    })\n  ");const t=await postToParent({action:"get-room-info"},!0);Object.entries(t).forEach(([n,e])=>{postTo(window,{action:"room-updated",data:sanitizeObject({key:n,value:e})})});const a=setInterval(()=>{const{href:n}=window.location;n!==e&&(e=n,window.parent.postMessage({action:"url-changed",name:name,url:n},"*"))},100);window.onunload=(()=>{clearInterval(a)}),(n=browser.runtime.connect({name:name})).onMessage.addListener(n=>{const{name:e,action:o}=n;if(e===name)switch(o){case"frame-identity":{const{tabId:e,frameId:o}=n;window.postMessage({action:"register-iframe",name:name,tabId:e,frameId:o},"*");break}}}),n.postMessage({name:name,action:"frame-identity"}),window.addEventListener("message",({data:{action:n,url:e}})=>{"force-url"===n&&(window.location.href=e)}),window.addEventListener("get-url",()=>n.postMessage({action:"get-url",data:window.location.href}))}();