(()=>{if(window.top!==window)return;const e="plex-video-detect";browser.runtime.connect({name:e});let t;new MutationObserver(e=>{for(const o of e)if("childList"===o.type){if(Array.from(o.addedNodes).length>0){const e=document.querySelector("video");if(e&&e!==t){twosevenExtLog("plex-video-detect","Detected new video"),t&&t.observer.disconnect(),t=e;const o=new MutationObserver(e=>{});t.observer=o,o.observe(t,{attributes:!0,attributeFilter:["src"]})}}}}).observe(document.body,{childList:!0,subtree:!0})})();